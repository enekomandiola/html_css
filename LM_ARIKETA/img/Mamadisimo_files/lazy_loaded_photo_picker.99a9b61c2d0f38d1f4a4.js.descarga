/*! Copyright (c) 2019 WhatsApp Inc. All Rights Reserved. */
webpackJsonp([133],{baggaibbia:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),r=i("dcghjbcbii"),s=h(r),o=h(i("bcbahjefec"));function h(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return i=n=l(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r))),n.onEnd=function(){n.end()},n.onFinished=function(t,e){n.props.onFinished(t,e),n.end()},l(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"UNSAFE_componentWillMount",value:function(){this.push(a.createElement(s.default,{onCancel:this.onEnd,onFinished:this.onFinished,onRetake:this.props.onRetake,retryText:r.RETRY_OPTIONS.RESTART,img:this.props.img}))}}]),e}();e.default=c},bcijfighgd:function(t,e){t.exports={muted:"_3hvx8",scaler:"_1DKwn",scalerButton:"_3ndIG"}},bdgjaajijj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=y(i("ddhijeejag")),r=y(i("dcecgegjfc")),s=b(i("gbfffciea")),o=b(i("bhaigiibeh")),h=i("dcghjbcbii"),l=b(h),c=b(i("bcbahjefec")),u=i("dgfecega"),d=y(i("cajijabhgb")),f=i("ffchhcfdj"),p=b(f),m=i("chcadgfgad"),g=b(m),v=b(i("bjbedjfe")),_=i("ejbdjaifi");function b(t){return t&&t.__esModule?t:{default:t}}function y(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function w(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var E=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,c=Array(o),u=0;u<o;u++)c[u]=arguments[u];return i=n=w(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),n.refCaptureDrawer=null,n.setRefCaptureDrawer=function(t){n.refCaptureDrawer=t},n.pushPermissionModal=function(){n.push(a.createElement(p.default,{messaging:f.Messaging.CAMERA,type:p.default.TYPE.GUIDE_ALLOW,onConfirm:n.popModal}),"modal")},n.popModal=function(){n.pop("modal")},n.startCaptureDrawer=function(){var t=r.start("camera",n.pushPermissionModal);Promise.race([t,n.props.rejectOnUnmount()]).checkpoint(n.props.rejectOnUnmount()).then(function(t){n.refCaptureDrawer||n.popModal(),t&&n.refCaptureDrawer&&n.refCaptureDrawer.loadNewStream(t)}).catch(d.GUM.NotAllowedError,function(){n.cleanUp(),s.default.openModal(a.createElement(p.default,{messaging:f.Messaging.CAMERA_FAIL,type:p.default.TYPE.GUIDE_UNBLOCK}))}).catch(d.GUM.GUMError,function(){n.cleanUp(),s.default.openModal(a.createElement(p.default,{messaging:f.Messaging.CAMERA_MISSING,type:p.default.TYPE.GUIDE_NONE}))})},n.onFinished=function(t,e){n.props.onFinished(t,e),n.cleanUp()},n.cleanUp=function(){n.end()},n.onRetake=function(){n.pop("flow-transition-box-size-drawer-pop"),n.startCaptureDrawer()},n.onCaptured=function(t){n.push(a.createElement(g.default,{type:m.BoxModalType},a.createElement(l.default,{onRetake:n.onRetake,retryText:h.RETRY_OPTIONS.RETAKE,onFinished:n.onFinished,onCancel:n.cleanUp,img:t})),"flow-transition-box-size-drawer-push")},w(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,c.default),n(e,[{key:"UNSAFE_componentWillMount",value:function(){this.push(a.createElement(g.default,{type:m.BoxModalType},a.createElement(o.default,{ref:this.setRefCaptureDrawer,stream:void 0,caption:!1,layoutType:u.FIT_TYPE.COVER,onBack:this.cleanUp,onSend:null,onCaptured:this.onCaptured,chat:void 0}))),this.startCaptureDrawer()}}]),e}();e.default=(0,v.default)((0,_.hoc)(E))},bgjhfgcbb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag"));function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,s=Array(a),o=0;o<a;o++)s[o]=arguments[o];return i=n=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),n.setRefCanvas=function(t){n.refCanvas=t},r(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),n(e,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return a.createElement("canvas",{className:this.props.className,ref:this.setRefCanvas})}}]),e}();s.displayName="StaticCanvas",e.default=s},bibadcdgfe:function(t,e){t.exports=function(t,e,i,n){for(var a=-1,r=null==t?0:t.length;++a<r;){var s=t[a];e(n,s,i(s),t)}return n}},bjghfcjch:function(t,e){t.exports={muted:"_2NeGK",mediaViewerImg:"V2ijM",cropOverlay:"gHl-a"}},ceigihebcb:function(t,e,i){var n=i("gfghejage");t.exports=function(t,e,i,a){return n(t,function(t,n,r){e(a,t,i(t),r)}),a}},cfabbaghh:function(t,e){
/*!
* @license EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
var i=i||{};i.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},(i=i||{}).promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var a in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(a)&&"function"==typeof n[a]&&(i[e+a]=n[a]);return t},(i=i||{}).indexOf=function(t,e){"use strict";for(var i=0,n=t.length;n>i;i++)if(e===t[i])return i;return-1},i=i||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},i.Event=t}(),i=i||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,a=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return a&&this.removeEventListener(t,e,i),(a=n[t])?a.push(e):n[t]=[e],e},e.on=function(t,e,i,n,a,r){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,a),n&&t.remove()},r)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var a=n[t];if(a)for(var r=0,s=a.length;s>r;r++)if(a[r]==e){1==s?delete n[t]:a.splice(r,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,n){if("string"==typeof t){var a=this._listeners;if(!(e||a&&a[t]))return!0;t=new i.Event(t,e,n)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var o,h=s.length;for(o=h-1;o>=0&&!t.propagationStopped;o--)s[o]._dispatchEvent(t,1+(0==o));for(o=1;h>o&&!t.propagationStopped;o++)s[o]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var a=n[t.type];if(!a||!(i=a.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,a=a.slice();for(var r=0;i>r&&!t.immediatePropagationStopped;r++){var s=a[r];s.handleEvent?s.handleEvent(t):s(t),t.removed&&(this.off(t.type,s,1==e),t.removed=!1)}}},i.EventDispatcher=t}(),i=i||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,i.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t.getFPS());for(var a=0;e>a;a++)i+=n[a];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,n=t._getTime(),a=n-t._lastTime;if(t._lastTime=n,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=a),t.hasEventListener("tick")){var r=new i.Event("tick"),s=t.maxDelta;r.delta=s&&a>s?s:a,r.paused=e,r.time=n,r.runTime=n-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-n);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(n);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(e&&e.call(performance)||(new Date).getTime())-t._startTime},i.Ticker=t}(),i=i||{},function(){"use strict";function t(){throw"UID cannot be instantiated"}t._nextID=0,t.get=function(){return t._nextID++},i.UID=t}(),i=i||{},function(){"use strict";function t(t,e,i,n,a,r,s,o,h,l,c){this.Event_constructor(t,e,i),this.stageX=n,this.stageY=a,this.rawX=null==h?n:h,this.rawY=null==l?a:l,this.nativeEvent=r,this.pointerID=s,this.primary=!!o,this.relatedTarget=c}var e=i.extend(t,i.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch(t){}e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},i.MouseEvent=i.promote(t,"Event")}(),i=i||{},function(){"use strict";function t(t,e,i,n,a,r){this.setValues(t,e,i,n,a,r)}var e=t.prototype;t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,i,n,a,r){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==n?1:n,this.tx=a||0,this.ty=r||0,this},e.append=function(t,e,i,n,a,r){var s=this.a,o=this.b,h=this.c,l=this.d;return(1!=t||0!=e||0!=i||1!=n)&&(this.a=s*t+h*e,this.b=o*t+l*e,this.c=s*i+h*n,this.d=o*i+l*n),this.tx=s*a+h*r+this.tx,this.ty=o*a+l*r+this.ty,this},e.prepend=function(t,e,i,n,a,r){var s=this.a,o=this.c,h=this.tx;return this.a=t*s+i*this.b,this.b=e*s+n*this.b,this.c=t*o+i*this.d,this.d=e*o+n*this.d,this.tx=t*h+i*this.ty+a,this.ty=e*h+n*this.ty+r,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,i,n,a,r,s,o,h,l){if(r%360)var c=r*t.DEG_TO_RAD,u=Math.cos(c),d=Math.sin(c);else u=1,d=0;return s||o?(s*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(s),Math.cos(s),e,i),this.append(u*n,d*n,-d*a,u*a,0,0)):this.append(u*n,d*n,-d*a,u*a,e,i),(h||l)&&(this.tx-=h*this.a+l*this.c,this.ty-=h*this.b+l*this.d),this},e.prependTransform=function(e,i,n,a,r,s,o,h,l){if(r%360)var c=r*t.DEG_TO_RAD,u=Math.cos(c),d=Math.sin(c);else u=1,d=0;return(h||l)&&(this.tx-=h,this.ty-=l),s||o?(s*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(u*n,d*n,-d*a,u*a,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(s),Math.cos(s),e,i)):this.prepend(u*n,d*n,-d*a,u*a,e,i),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var i=Math.cos(e),n=Math.sin(e),a=this.a,r=this.b;return this.a=a*i+this.c*n,this.b=r*i+this.d*n,this.c=-a*n+this.c*i,this.d=-r*n+this.d*i,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,a=this.tx,r=t*n-e*i;return this.a=n/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-n*a)/r,this.ty=-(t*this.ty-e*a)/r,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,i){return(i=i||{}).x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a);return 1e-5>Math.abs(1-i/n)?(e.rotation=n/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=n/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,i.Matrix2D=t}(),i=i||{},function(){"use strict";function t(t,e,i,n,a){this.setValues(t,e,i,n,a)}var e=t.prototype;e.setValues=function(t,e,n,a,r){return this.visible=null==t||!!t,this.alpha=null==e?1:e,this.shadow=n,this.compositeOperation=a,this.matrix=r||this.matrix&&this.matrix.identity()||new i.Matrix2D,this},e.append=function(t,e,i,n,a){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=n||this.compositeOperation,this.visible=this.visible&&t,a&&this.matrix.appendMatrix(a),this},e.prepend=function(t,e,i,n,a){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||n,this.visible=this.visible&&t,a&&this.matrix.prependMatrix(a),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},i.DisplayProps=t}(),i=i||{},function(){"use strict";function t(t,e){this.setValues(t,e)}var e=t.prototype;e.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},i.Point=t}(),i=i||{},function(){"use strict";function t(t,e,i,n){this.setValues(t,e,i,n)}var e=t.prototype;e.setValues=function(t,e,i,n){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this},e.extend=function(t,e,i,n){return n=n||0,t+(i=i||0)>this.x+this.width&&(this.width=t+i-this.x),e+n>this.y+this.height&&(this.height=e+n-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},e.pad=function(t,e,i,n){return this.x-=e,this.y-=t,this.width+=e+n,this.height+=t+i,this},e.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},e.contains=function(t,e,i,n){return i=i||0,n=n||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+n<=this.y+this.height},e.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},e.intersection=function(e){var i=e.x,n=e.y,a=i+e.width,r=n+e.height;return this.x>i&&(i=this.x),this.y>n&&(n=this.y),this.x+this.width<a&&(a=this.x+this.width),this.y+this.height<r&&(r=this.y+this.height),i>=a||n>=r?null:new t(i,n,a-i,r-n)},e.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},i.Rectangle=t}(),i=i||{},function(){"use strict";function t(t,e,i,n,a,r,s){t.addEventListener&&(this.target=t,this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==n?"down":n,this.play=a,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),r&&(s&&(r.actionsEnabled=!1,r.gotoAndStop&&r.gotoAndStop(s)),t.hitArea=r))}var e=t.prototype;e.setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset))}},e.getEnabled=function(){return this._enabled};try{Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled}})}catch(t){}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,i=this.target,n=t.type;"mousedown"==n?(this._isPressed=!0,e=this.downLabel):"pressup"==n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},e._reset=function(){var t=this.paused;this.__reset(),this.paused=t},i.ButtonHelper=t}(),i=i||{},function(){"use strict";function t(t,e,i,n){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=n||0}var e=t.prototype;t.identity=new t("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},i.Shadow=t}(),i=i||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=i.extend(t,i.EventDispatcher);e.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(e,{animations:{get:e.getAnimations}})}catch(t){}e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var n=this.getFrame(t);return n?(e||new i.Rectangle).setValues(-n.regX,-n.regY,n.rect.width,n.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var e,n,a,r;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(n=t.images.length)>0)for(r=this._images=[],e=0;n>e;e++){var s=t.images[e];if("string"==typeof s){var o=s;(s=document.createElement("img")).src=o}r.push(s),s.getContext||s.naturalWidth||(this._loadCount++,this.complete=!1,function(t,e){s.onload=function(){t._handleImageLoad(e)}}(this,o),function(t,e){s.onerror=function(){t._handleImageError(e)}}(this,o))}if(null==t.frames);else if(Array.isArray(t.frames))for(this._frames=[],e=0,n=(r=t.frames).length;n>e;e++){var h=r[e];this._frames.push({image:this._images[h[4]?h[4]:0],rect:new i.Rectangle(h[0],h[1],h[2],h[3]),regX:h[5]||0,regY:h[6]||0})}else a=t.frames,this._frameWidth=a.width,this._frameHeight=a.height,this._regX=a.regX||0,this._regY=a.regY||0,this._spacing=a.spacing||0,this._margin=a.margin||0,this._numFrames=a.count,0==this._loadCount&&this._calculateFrames();var l;if(this._animations=[],null!=(a=t.animations))for(l in this._data={},a){var c={name:l},u=a[l];if("number"==typeof u)r=c.frames=[u];else if(Array.isArray(u))if(1==u.length)c.frames=[u[0]];else for(c.speed=u[3],c.next=u[2],r=c.frames=[],e=u[0];e<=u[1];e++)r.push(e);else{c.speed=u.speed,c.next=u.next;var d=u.frames;r=c.frames="number"==typeof d?[d]:d.slice(0)}(!0===c.next||void 0===c.next)&&(c.next=l),(!1===c.next||r.length<2&&c.next==l)&&(c.next=null),c.speed||(c.speed=1),this._animations.push(l),this._data[l]=c}}},e._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._handleImageError=function(t){var e=new i.Event("error");e.src=t,this.dispatchEvent(e),0==--this._loadCount&&this.dispatchEvent("complete")},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,n=this._frameWidth,a=this._frameHeight,r=this._spacing,s=this._margin;t:for(var o=0,h=this._images;o<h.length;o++)for(var l=h[o],c=l.width,u=l.height,d=s;u-s-a>=d;){for(var f=s;c-s-n>=f;){if(e>=t)break t;e++,this._frames.push({image:l,rect:new i.Rectangle(f,d,n,a),regX:this._regX,regY:this._regY}),f+=n+r}d+=a+r}this._numFrames=e}},i.SpriteSheet=i.promote(t,"EventDispatcher")}(),i=i||{},function(){"use strict";function t(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var e=t.prototype,n=t;t.getRGB=function(t,e,i,n){return null!=t&&null==i&&(n=e,i=255&t,e=t>>8&255,t=t>>16&255),null==n?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+n+")"},t.getHSL=function(t,e,i,n){return null==n?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+n+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"];var a=i.createCanvas?i.createCanvas():document.createElement("canvas");a.getContext&&(t._ctx=a.getContext("2d"),a.width=a.height=1),e.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(e,{instructions:{get:e.getInstructions}})}catch(t){}e.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},e.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,n=this._storeIndex,a=i.length;a>n;n++)i[n].exec(t,e)},e.drawAsPath=function(t){this._updateInstructions();for(var e,i=this._instructions,n=this._storeIndex,a=i.length;a>n;n++)!1!==(e=i[n]).path&&e.exec(t)},e.moveTo=function(t,e){return this.append(new n.MoveTo(t,e),!0)},e.lineTo=function(t,e){return this.append(new n.LineTo(t,e))},e.arcTo=function(t,e,i,a,r){return this.append(new n.ArcTo(t,e,i,a,r))},e.arc=function(t,e,i,a,r,s){return this.append(new n.Arc(t,e,i,a,r,s))},e.quadraticCurveTo=function(t,e,i,a){return this.append(new n.QuadraticCurveTo(t,e,i,a))},e.bezierCurveTo=function(t,e,i,a,r,s){return this.append(new n.BezierCurveTo(t,e,i,a,r,s))},e.rect=function(t,e,i,a){return this.append(new n.Rect(t,e,i,a))},e.closePath=function(){return this._activeInstructions.length?this.append(new n.ClosePath):this},e.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},e.beginFill=function(t){return this._setFill(t?new n.Fill(t):null)},e.beginLinearGradientFill=function(t,e,i,a,r,s){return this._setFill((new n.Fill).linearGradient(t,e,i,a,r,s))},e.beginRadialGradientFill=function(t,e,i,a,r,s,o,h){return this._setFill((new n.Fill).radialGradient(t,e,i,a,r,s,o,h))},e.beginBitmapFill=function(t,e,i){return this._setFill(new n.Fill(null,i).bitmap(t,e))},e.endFill=function(){return this.beginFill()},e.setStrokeStyle=function(t,e,i,a,r){return this._updateInstructions(!0),this._strokeStyle=this.command=new n.StrokeStyle(t,e,i,a,r),this._stroke&&(this._stroke.ignoreScale=r),this._strokeIgnoreScale=r,this},e.setStrokeDash=function(t,e){return this._updateInstructions(!0),this._strokeDash=this.command=new n.StrokeDash(t,e),this},e.beginStroke=function(t){return this._setStroke(t?new n.Stroke(t):null)},e.beginLinearGradientStroke=function(t,e,i,a,r,s){return this._setStroke((new n.Stroke).linearGradient(t,e,i,a,r,s))},e.beginRadialGradientStroke=function(t,e,i,a,r,s,o,h){return this._setStroke((new n.Stroke).radialGradient(t,e,i,a,r,s,o,h))},e.beginBitmapStroke=function(t,e){return this._setStroke((new n.Stroke).bitmap(t,e))},e.endStroke=function(){return this.beginStroke()},e.curveTo=e.quadraticCurveTo,e.drawRect=e.rect,e.drawRoundRect=function(t,e,i,n,a){return this.drawRoundRectComplex(t,e,i,n,a,a,a,a)},e.drawRoundRectComplex=function(t,e,i,a,r,s,o,h){return this.append(new n.RoundRect(t,e,i,a,r,s,o,h))},e.drawCircle=function(t,e,i){return this.append(new n.Circle(t,e,i))},e.drawEllipse=function(t,e,i,a){return this.append(new n.Ellipse(t,e,i,a))},e.drawPolyStar=function(t,e,i,a,r,s){return this.append(new n.PolyStar(t,e,i,a,r,s))},e.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},e.decodePath=function(e){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],n=[2,2,4,6,0],a=0,r=e.length,s=[],o=0,h=0,l=t.BASE_64;r>a;){var c=e.charAt(a),u=l[c],d=u>>3,f=i[d];if(!f||3&u)throw"bad path data (@"+a+"): "+c;var p=n[d];d||(o=h=0),s.length=0,a++;for(var m=2+(u>>2&1),g=0;p>g;g++){var v=l[e.charAt(a)],_=v>>5?-1:1;v=(31&v)<<6|l[e.charAt(a+1)],3==m&&(v=v<<6|l[e.charAt(a+2)]),v=_*v/10,g%2?o=v+=o:h=v+=h,s[g]=v,a+=m}f.apply(this,s)}return this},e.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},e.unstore=function(){return this._storeIndex=0,this},e.clone=function(){var e=new t;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeDash=this._strokeDash,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},e.toString=function(){return"[Graphics]"},e.mt=e.moveTo,e.lt=e.lineTo,e.at=e.arcTo,e.bt=e.bezierCurveTo,e.qt=e.quadraticCurveTo,e.a=e.arc,e.r=e.rect,e.cp=e.closePath,e.c=e.clear,e.f=e.beginFill,e.lf=e.beginLinearGradientFill,e.rf=e.beginRadialGradientFill,e.bf=e.beginBitmapFill,e.ef=e.endFill,e.ss=e.setStrokeStyle,e.sd=e.setStrokeDash,e.s=e.beginStroke,e.ls=e.beginLinearGradientStroke,e.rs=e.beginRadialGradientStroke,e.bs=e.beginBitmapStroke,e.es=e.endStroke,e.dr=e.drawRect,e.rr=e.drawRoundRect,e.rc=e.drawRoundRectComplex,e.dc=e.drawCircle,e.de=e.drawEllipse,e.dp=e.drawPolyStar,e.p=e.decodePath,e._updateInstructions=function(e){var i=this._instructions,n=this._activeInstructions,a=this._commitIndex;if(this._dirty&&n.length){i.length=a,i.push(t.beginCmd);var r=n.length,s=i.length;i.length=s+r;for(var o=0;r>o;o++)i[o+s]=n[o];this._fill&&i.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,i.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,i.push(this._strokeStyle)),i.push(this._stroke)),this._dirty=!1}e&&(n.length=0,this._commitIndex=i.length)},e._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},e._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},(n.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(n.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(n.ArcTo=function(t,e,i,n,a){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.radius=a}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(n.Arc=function(t,e,i,n,a,r){this.x=t,this.y=e,this.radius=i,this.startAngle=n,this.endAngle=a,this.anticlockwise=!!r}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(n.QuadraticCurveTo=function(t,e,i,n){this.cpx=t,this.cpy=e,this.x=i,this.y=n}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(n.BezierCurveTo=function(t,e,i,n,a,r){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=n,this.x=a,this.y=r}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(n.Rect=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(n.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(n.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},(e=(n.Fill=function(t,e){this.style=t,this.matrix=e}).prototype).exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},e.linearGradient=function(e,i,n,a,r,s){for(var o=this.style=t._ctx.createLinearGradient(n,a,r,s),h=0,l=e.length;l>h;h++)o.addColorStop(i[h],e[h]);return o.props={colors:e,ratios:i,x0:n,y0:a,x1:r,y1:s,type:"linear"},this},e.radialGradient=function(e,i,n,a,r,s,o,h){for(var l=this.style=t._ctx.createRadialGradient(n,a,r,s,o,h),c=0,u=e.length;u>c;c++)l.addColorStop(i[c],e[c]);return l.props={colors:e,ratios:i,x0:n,y0:a,r0:r,x1:s,y1:o,r1:h,type:"radial"},this},e.bitmap=function(e,i){(e.naturalWidth||e.getContext||e.readyState>=2)&&((this.style=t._ctx.createPattern(e,i||"")).props={image:e,repetition:i,type:"bitmap"});return this},e.path=!1,(e=(n.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype).exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},e.linearGradient=n.Fill.prototype.linearGradient,e.radialGradient=n.Fill.prototype.radialGradient,e.bitmap=n.Fill.prototype.bitmap,e.path=!1,(e=(n.StrokeStyle=function(t,e,i,n,a){this.width=t,this.caps=e,this.joints=i,this.miterLimit=n,this.ignoreScale=a}).prototype).exec=function(e){e.lineWidth=null==this.width?"1":this.width,e.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:t.STROKE_CAPS_MAP[this.caps],e.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:t.STROKE_JOINTS_MAP[this.joints],e.miterLimit=null==this.miterLimit?"10":this.miterLimit,e.ignoreScale=null!=this.ignoreScale&&this.ignoreScale},e.path=!1,(n.StrokeDash=function(t,e){this.segments=t,this.offset=e||0}).prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments||n.StrokeDash.EMPTY_SEGMENTS),t.lineDashOffset=this.offset||0)},n.StrokeDash.EMPTY_SEGMENTS=[],(n.RoundRect=function(t,e,i,n,a,r,s,o){this.x=t,this.y=e,this.w=i,this.h=n,this.radiusTL=a,this.radiusTR=r,this.radiusBR=s,this.radiusBL=o}).prototype.exec=function(t){var e=(l>h?h:l)/2,i=0,n=0,a=0,r=0,s=this.x,o=this.y,h=this.w,l=this.h,c=this.radiusTL,u=this.radiusTR,d=this.radiusBR,f=this.radiusBL;0>c&&(c*=i=-1),c>e&&(c=e),0>u&&(u*=n=-1),u>e&&(u=e),0>d&&(d*=a=-1),d>e&&(d=e),0>f&&(f*=r=-1),f>e&&(f=e),t.moveTo(s+h-u,o),t.arcTo(s+h+u*n,o-u*n,s+h,o+u,u),t.lineTo(s+h,o+l-d),t.arcTo(s+h+d*a,o+l+d*a,s+h-d,o+l,d),t.lineTo(s+f,o+l),t.arcTo(s-f*r,o+l+f*r,s,o+l-f,f),t.lineTo(s,o+c),t.arcTo(s-c*i,o-c*i,s+c,o,c),t.closePath()},(n.Circle=function(t,e,i){this.x=t,this.y=e,this.radius=i}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(n.Ellipse=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.w,a=this.h,r=.5522848,s=n/2*r,o=a/2*r,h=e+n,l=i+a,c=e+n/2,u=i+a/2;t.moveTo(e,u),t.bezierCurveTo(e,u-o,c-s,i,c,i),t.bezierCurveTo(c+s,i,h,u-o,h,u),t.bezierCurveTo(h,u+o,c+s,l,c,l),t.bezierCurveTo(c-s,l,e,u+o,e,u)},(n.PolyStar=function(t,e,i,n,a,r){this.x=t,this.y=e,this.radius=i,this.sides=n,this.pointSize=a,this.angle=r}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.radius,a=(this.angle||0)/180*Math.PI,r=this.sides,s=1-(this.pointSize||0),o=Math.PI/r;t.moveTo(e+Math.cos(a)*n,i+Math.sin(a)*n);for(var h=0;r>h;h++)a+=o,1!=s&&t.lineTo(e+Math.cos(a)*n*s,i+Math.sin(a)*n*s),a+=o,t.lineTo(e+Math.cos(a)*n,i+Math.sin(a)*n);t.closePath()},t.beginCmd=new n.BeginPath,i.Graphics=t}(),i=i||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=i.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new i.DisplayProps,this._rectangle=new i.Rectangle,this._bounds=null}var e=i.extend(t,i.EventDispatcher);t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1,t._snapToPixelEnabled=!1;var n=i.createCanvas?i.createCanvas():document.createElement("canvas");n.getContext&&(t._hitTestCanvas=n,t._hitTestContext=n.getContext("2d"),n.width=n.height=1),t._nextCacheID=1,e.getStage=function(){for(var t=this,e=i.Stage;t.parent;)t=t.parent;return t instanceof e?t:null};try{Object.defineProperties(e,{stage:{get:e.getStage}})}catch(t){}e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var n=this._cacheScale;return t.drawImage(i,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,i.width/n,i.height/n),!0},e.updateContext=function(e){var i=this,n=i.mask,a=i._props.matrix;n&&n.graphics&&!n.graphics.isEmpty()&&(n.getMatrix(a),e.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),n.graphics.drawAsPath(e),e.clip(),a.invert(),e.transform(a.a,a.b,a.c,a.d,a.tx,a.ty)),this.getMatrix(a);var r=a.tx,s=a.ty;t._snapToPixelEnabled&&i.snapToPixel&&(r=r+(0>r?-.5:.5)|0,s=s+(0>s?-.5:.5)|0),e.transform(a.a,a.b,a.c,a.d,r,s),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},e.cache=function(t,e,n,a,r){r=r||1,this.cacheCanvas||(this.cacheCanvas=i.createCanvas?i.createCanvas():document.createElement("canvas")),this._cacheWidth=n,this._cacheHeight=a,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=r,this.updateCache()},e.updateCache=function(e){var i=this.cacheCanvas;if(!i)throw"cache() must be called before updateCache()";var n=this._cacheScale,a=this._cacheOffsetX*n,r=this._cacheOffsetY*n,s=this._cacheWidth,o=this._cacheHeight,h=i.getContext("2d"),l=this._getFilterBounds();a+=this._filterOffsetX=l.x,r+=this._filterOffsetY=l.y,s=Math.ceil(s*n)+l.width,o=Math.ceil(o*n)+l.height,s!=i.width||o!=i.height?(i.width=s,i.height=o):e||h.clearRect(0,0,s+1,o+1),h.save(),h.globalCompositeOperation=e,h.setTransform(n,0,0,n,-a,-r),this.draw(h,!0),this._applyFilters(),h.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.localToGlobal=function(t,e,n){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,n||new i.Point)},e.globalToLocal=function(t,e,n){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,n||new i.Point)},e.localToLocal=function(t,e,i,n){return n=this.localToGlobal(t,e,n),i.globalToLocal(n.x,n.y,n)},e.setTransform=function(t,e,i,n,a,r,s,o,h){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==n?1:n,this.rotation=a||0,this.skewX=r||0,this.skewY=s||0,this.regX=o||0,this.regY=h||0,this},e.getMatrix=function(t){var e=this,n=t&&t.identity()||new i.Matrix2D;return e.transformMatrix?n.copy(e.transformMatrix):n.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},e.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},e.getConcatenatedDisplayProps=function(t){t=t?t.identity():new i.DisplayProps;var e=this,n=e.getMatrix(t.matrix);do{t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&n.prependMatrix(e.getMatrix(e._props.matrix))}while(e=e.parent);return t},e.hitTest=function(e,i){var n=t._hitTestContext;n.setTransform(1,0,0,1,-e,-i),this.draw(n);var a=this._testHit(n);return n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,2,2),a},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,n,a){null==t&&(this._bounds=t),this._bounds=(this._bounds||new i.Rectangle).setValues(t,e,n,a)},e.clone=function(){return this._cloneProps(new t)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},e._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch(e){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,n=this.cacheCanvas.height,a=0;t>a;a++)this.filters[a].applyFilter(e,0,0,i,n)},e._getFilterBounds=function(){var t,e=this.filters,i=this._rectangle.setValues(0,0,0,0);if(!e||!(t=e.length))return i;for(var n=0;t>n;n++){var a=this.filters[n];a.getBounds&&a.getBounds(i)}return i},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,i){if(!t)return t;var n=t.x,a=t.y,r=t.width,s=t.height,o=this._props.matrix;o=i?o.identity():this.getMatrix(o),(n||a)&&o.appendTransform(0,0,1,1,0,0,0,-n,-a),e&&o.prependMatrix(e);var h=r*o.a,l=r*o.b,c=s*o.c,u=s*o.d,d=o.tx,f=o.ty,p=d,m=d,g=f,v=f;return(n=h+d)<p?p=n:n>m&&(m=n),(n=h+c+d)<p?p=n:n>m&&(m=n),(n=c+d)<p?p=n:n>m&&(m=n),(a=l+f)<g?g=a:a>v&&(v=a),(a=l+u+f)<g?g=a:a>v&&(v=a),(a=u+f)<g?g=a:a>v&&(v=a),t.setValues(p,g,m-p,v-g)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,i=0,n=e.length;n>i;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},i.DisplayObject=i.promote(t,"EventDispatcher")}(),i=i||{},function(){"use strict";function t(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var e=i.extend(t,i.DisplayObject);e.getNumChildren=function(){return this.children.length};try{Object.defineProperties(e,{numChildren:{get:e.getNumChildren}})}catch(t){}e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),n=0,a=i.length;a>n;n++){var r=i[n];r.isVisible()&&(t.save(),r.updateContext(t),r.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},e.addChildAt=function(t,e){var i=arguments.length,n=arguments[i-1];if(0>n||n>this.children.length)return arguments[i-2];if(i>2){for(var a=0;i-1>a;a++)this.addChildAt(arguments[a],n+a);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent("added"),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var n=!0,a=0;e>a;a++)n=n&&this.removeChild(arguments[a]);return n}return this.removeChildAt(i.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],n=0;e>n;n++)i[n]=arguments[n];i.sort(function(t,e){return e-t});var a=!0;for(n=0;e>n;n++)a=a&&this.removeChildAt(i[n]);return a}if(0>t||t>this.children.length-1)return!1;var r=this.children[t];return r&&(r.parent=null),this.children.splice(t,1),r.dispatchEvent("removed"),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return i.indexOf(this.children,t)},e.swapChildrenAt=function(t,e){var i=this.children,n=i[t],a=i[e];n&&a&&(i[t]=a,i[e]=n)},e.swapChildren=function(t,e){for(var i,n,a=this.children,r=0,s=a.length;s>r&&(a[r]==t&&(i=r),a[r]==e&&(n=r),null==i||null==n);r++);r!=s&&(a[i]=e,a[n]=t)},e.setChildIndex=function(t,e){var i=this.children,n=i.length;if(!(t.parent!=this||0>e||e>=n)){for(var a=0;n>a&&i[a]!=t;a++);a!=n&&a!=e&&(i.splice(a,1),i.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e,i){var n=[],a=this.localToGlobal(t,e);return this._getObjectsUnderPoint(a.x,a.y,n,i>0,1==i),n},e.getObjectUnderPoint=function(t,e,i){var n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,null,i>0,1==i)},e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var i=this._cloneProps(new t);return e&&this._cloneChildren(i),i},e.toString=function(){return"[Container (name="+this.name+")]"},e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},e._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,n=this.children.length;n>i;i++){var a=this.children[i].clone(!0);a.parent=t,e.push(a)}},e._getObjectsUnderPoint=function(e,n,a,r,s,o){if(!(o=o||0)&&!this._testMask(this,e,n))return null;var h,l=i.DisplayObject._hitTestContext;s=s||r&&this._hasMouseEventListener();for(var c=this.children,u=c.length-1;u>=0;u--){var d=c[u],f=d.hitArea;if(d.visible&&(f||d.isVisible())&&(!r||d.mouseEnabled)&&(f||this._testMask(d,e,n)))if(!f&&d instanceof t){var p=d._getObjectsUnderPoint(e,n,a,r,s,o+1);if(!a&&p)return r&&!this.mouseChildren?this:p}else{if(r&&!s&&!d._hasMouseEventListener())continue;var m=d.getConcatenatedDisplayProps(d._props);if(h=m.matrix,f&&(h.appendMatrix(f.getMatrix(f._props.matrix)),m.alpha=f.alpha),l.globalAlpha=m.alpha,l.setTransform(h.a,h.b,h.c,h.d,h.tx-e,h.ty-n),(f||d).draw(l),!this._testHit(l))continue;if(l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,2,2),!a)return r&&!this.mouseChildren?this:d;a.push(d)}}return null},e._testMask=function(t,e,n){var a=t.mask;if(!a||!a.graphics||a.graphics.isEmpty())return!0;var r=this._props.matrix,s=t.parent;r=s?s.getConcatenatedMatrix(r):r.identity(),r=a.getMatrix(a._props.matrix).prependMatrix(r);var o=i.DisplayObject._hitTestContext;return o.setTransform(r.a,r.b,r.c,r.d,r.tx-e,r.ty-n),a.graphics.drawAsPath(o),o.fillStyle="#000",o.fill(),!!this._testHit(o)&&(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,2,2),!0)},e._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var n=this._props.matrix;n=e?n.identity():this.getMatrix(n),t&&n.prependMatrix(t);for(var a=this.children.length,r=null,s=0;a>s;s++){var o=this.children[s];o.visible&&(i=o._getBounds(n))&&(r?r.extend(i.x,i.y,i.width,i.height):r=i.clone())}return r},i.Container=i.promote(t,"DisplayObject")}(),i=i||{},function(){"use strict";function t(t){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var e=i.extend(t,i.Container);e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch(t){}e.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),!1!==this.dispatchEvent("drawstart",!1,!0))){i.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,n=this.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),this.autoClear&&(e?n.clearRect(e.x,e.y,e.width,e.height):n.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),n.save(),this.drawRect&&(n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()),this.updateContext(n),this.draw(n,!1),n.restore(),this.dispatchEvent("drawend")}},e.tick=function(t){if(this.tickEnabled&&!1!==this.dispatchEvent("tickstart",!1,!0)){var e=new i.Event("tick");if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);this._tick(e),this.dispatchEvent("tickend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){var i,n=this.canvas.getContext("2d"),a=this.canvas.width,r=this.canvas.height;if(t){i=n.getImageData(0,0,a,r);var s=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=t,n.fillRect(0,0,a,r)}var o=this.canvas.toDataURL(e||"image/png");return t&&(n.putImageData(i,0,0),n.globalCompositeOperation=s),o},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,n=this._eventListeners;if(!t&&n){for(e in n)(i=n[e]).t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!n&&this.canvas){var a=window.addEventListener?window:document,r=this;for(e in(n=this._eventListeners={}).mouseup={t:a,f:function(t){r._handleMouseUp(t)}},n.mousemove={t:a,f:function(t){r._handleMouseMove(t)}},n.dblclick={t:this.canvas,f:function(t){r._handleDoubleClick(t)}},n.mousedown={t:this.canvas,f:function(t){r._handleMouseDown(t)}},n)(i=n[e]).t.addEventListener(e,i.f,!1)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),n=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),a=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,r=parseInt(a.paddingLeft)+parseInt(a.borderLeftWidth),s=parseInt(a.paddingTop)+parseInt(a.borderTopWidth),o=parseInt(a.paddingRight)+parseInt(a.borderRightWidth),h=parseInt(a.paddingBottom)+parseInt(a.borderBottomWidth);return{left:e.left+i+r,right:e.right+i-o,top:e.top+n+s,bottom:e.bottom+n-h}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,n,a){if((!this._prevStage||void 0!==a)&&this.canvas){var r=this._nextStage,s=this._getPointerData(t),o=s.inBounds;this._updatePointerPosition(t,e,i,n),(o||s.inBounds||this.mouseMoveOutside)&&(-1===t&&s.inBounds==!o&&this._dispatchMouseEvent(this,o?"mouseleave":"mouseenter",!1,t,s,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,s,e),this._dispatchMouseEvent(s.target,"pressmove",!0,t,s,e)),r&&r._handlePointerMove(t,e,i,n,null)}},e._updatePointerPosition=function(t,e,i,n){var a=this._getElementRect(this.canvas);i-=a.left,n-=a.top;var r=this.canvas.width,s=this.canvas.height;i/=(a.right-a.left)/r,n/=(a.bottom-a.top)/s;var o=this._getPointerData(t);(o.inBounds=i>=0&&n>=0&&r-1>=i&&s-1>=n)?(o.x=i,o.y=n):this.mouseMoveOutside&&(o.x=0>i?0:i>r-1?r-1:i,o.y=0>n?0:n>s-1?s-1:n),o.posEvtObj=e,o.rawX=i,o.rawY=n,(t===this._primaryPointerID||-1===t)&&(this.mouseX=o.x,this.mouseY=o.y,this.mouseInBounds=o.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i,n){var a=this._nextStage,r=this._getPointerData(t);if(!this._prevStage||void 0!==n){var s=null,o=r.target;n||!o&&!a||(s=this._getObjectsUnderPoint(r.x,r.y,null,!0)),r.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,r,e,s),r.down=!1),s==o&&this._dispatchMouseEvent(o,"click",!0,t,r,e),this._dispatchMouseEvent(o,"pressup",!0,t,r,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):r.target=null,a&&a._handlePointerUp(t,e,i,n||s&&this)}},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,n,a){this.preventSelection&&e.preventDefault(),(null==this._primaryPointerID||-1===t)&&(this._primaryPointerID=t),null!=n&&this._updatePointerPosition(t,e,i,n);var r=null,s=this._nextStage,o=this._getPointerData(t);a||(r=o.target=this._getObjectsUnderPoint(o.x,o.y,null,!0)),o.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,o,e,r),o.down=!0),this._dispatchMouseEvent(r,"mousedown",!0,t,o,e),s&&s._handlePointerDown(t,e,i,n,a||r&&this)},e._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var n=this._nextStage;if(!this._mouseOverIntervalID)return void(n&&n._testMouseOver(t,e,i));var a=this._getPointerData(-1);if(a&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var r,s,o,h=a.posEvtObj,l=i||h&&h.target==this.canvas,c=null,u=-1,d="";!e&&(t||this.mouseInBounds&&l)&&(c=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var f=this._mouseOverTarget||[],p=f[f.length-1],m=this._mouseOverTarget=[];for(r=c;r;)m.unshift(r),d||(d=r.cursor),r=r.parent;for(this.canvas.style.cursor=d,!e&&i&&(i.canvas.style.cursor=d),s=0,o=m.length;o>s&&m[s]==f[s];s++)u=s;for(p!=c&&this._dispatchMouseEvent(p,"mouseout",!0,-1,a,h,c),s=f.length-1;s>u;s--)this._dispatchMouseEvent(f[s],"rollout",!1,-1,a,h,c);for(s=m.length-1;s>u;s--)this._dispatchMouseEvent(m[s],"rollover",!1,-1,a,h,p);p!=c&&this._dispatchMouseEvent(c,"mouseover",!0,-1,a,h,p),n&&n._testMouseOver(t,e||c&&this,i||l&&this)}}},e._handleDoubleClick=function(t,e){var i=null,n=this._nextStage,a=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(a.x,a.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,a,t)),n&&n._handleDoubleClick(t,e||i&&this)},e._dispatchMouseEvent=function(t,e,n,a,r,s,o){if(t&&(n||t.hasEventListener(e))){var h=new i.MouseEvent(e,n,!1,r.x,r.y,s,a,a===this._primaryPointerID||-1===a,r.rawX,r.rawY,o);t.dispatchEvent(h)}},i.Stage=i.promote(t,"Container")}(),i=i||{},function(){function t(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var e=i.extend(t,i.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.image,e=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e)||!this.image)return!0;var i=this.image,n=this.sourceRect;if(n){var a=n.x,r=n.y,s=a+n.width,o=r+n.height,h=0,l=0,c=i.width,u=i.height;0>a&&(h-=a,a=0),s>c&&(s=c),0>r&&(l-=r,r=0),o>u&&(o=u),t.drawImage(i,a,r,s-a,o-r,h,l,s-a,o-r)}else t.drawImage(i,0,0);return!0},e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.image,i=this.sourceRect||e;return e&&(e.naturalWidth||e.getContext||e.readyState>=2)?this._rectangle.setValues(0,0,i.width,i.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},i.Bitmap=i.promote(t,"DisplayObject")}(),i=i||{},function(){"use strict";function t(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=e&&this.gotoAndPlay(e)}var e=i.extend(t,i.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var n=i.rect;return n.width&&n.height&&t.drawImage(i.image,n.x,n.y,n.width,n.height,-i.regX,-i.regY,n.width,n.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new t(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var e,i=this._animation,n=this.paused,a=this._currentFrame;if(i){var r=i.speed||1,s=this.currentAnimationFrame;if(s+t*r>=(e=i.frames.length)){var o=i.next;if(this._dispatchAnimationEnd(i,a,n,o,e-1))return;if(o)return this._goto(o,t-(e-s)/r);this.paused=!0,s=i.frames.length-1}else s+=t*r;this.currentAnimationFrame=s,this._currentFrame=i.frames[0|s]}else if((a=this._currentFrame+=t)>=(e=this.spriteSheet.getNumFrames())&&e>0&&!this._dispatchAnimationEnd(i,a,n,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();a=0|this._currentFrame,this.currentFrame!=a&&(this.currentFrame=a,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,e,n,a,r){var s=t?t.name:null;if(this.hasEventListener("animationend")){var o=new i.Event("animationend");o.name=s,o.next=a,this.dispatchEvent(o)}var h=this._animation!=t||this._currentFrame!=e;return h||n||!this.paused||(this.currentAnimationFrame=r,h=!0),h},e._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},i.Sprite=i.promote(t,"DisplayObject")}(),i=i||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),this.graphics=t||new i.Graphics}var e=i.extend(t,i.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this.graphics.draw(t,this),!0)},e.clone=function(e){var i=e&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new t(i))},e.toString=function(){return"[Shape (name="+this.name+")]"},i.Shape=i.promote(t,"DisplayObject")}(),i=i||{},function(){"use strict";function t(t,e,i){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var e=i.extend(t,i.DisplayObject),n=i.createCanvas?i.createCanvas():document.createElement("canvas");n.getContext&&(t._workingContext=n.getContext("2d"),n.width=n.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""===this.text)return null;var i=this._drawText(null,{}),n=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,a=n*t.H_OFFSETS[this.textAlign||"left"],r=(this.lineHeight||this.getMeasuredLineHeight())*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(a,r,n,i.height)},e.getMetrics=function(){var e={lines:[]};return e.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),e.vOffset=e.lineHeight*t.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,e,e.lines)},e.clone=function(){return this._cloneProps(new t(this.text,this.font,this.color))},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},e._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i,n){var a=!!e;a||((e=t._workingContext).save(),this._prepContext(e));for(var r=this.lineHeight||this.getMeasuredLineHeight(),s=0,o=0,h=String(this.text).split(/(?:\r\n|\r|\n)/),l=0,c=h.length;c>l;l++){var u=h[l],d=null;if(null!=this.lineWidth&&(d=e.measureText(u).width)>this.lineWidth){var f=u.split(/(\s)/);u=f[0],d=e.measureText(u).width;for(var p=1,m=f.length;m>p;p+=2){var g=e.measureText(f[p]+f[p+1]).width;d+g>this.lineWidth?(a&&this._drawTextLine(e,u,o*r),n&&n.push(u),d>s&&(s=d),u=f[p+1],d=e.measureText(u).width,o++):(u+=f[p]+f[p+1],d+=g)}}a&&this._drawTextLine(e,u,o*r),n&&n.push(u),i&&null==d&&(d=e.measureText(u).width),d>s&&(s=d),o++}return i&&(i.width=s,i.height=o*r),a||e.restore(),i},e._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},e._getMeasuredWidth=function(e){var i=t._workingContext;i.save();var n=this._prepContext(i).measureText(e).width;return i.restore(),n},i.Text=i.promote(t,"DisplayObject")}(),i=i||{},function(){"use strict";function t(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var e=i.extend(t,i.Container);t.maxPoolSize=100,t._spritePool=[],e.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateText(),this.Container_draw(t,e))},e.getBounds=function(){return this._updateText(),this.Container_getBounds()},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},e.clone=function(){return this._cloneProps(new t(this.text,this.spriteSheet))},e.addChild=e.addChildAt=e.removeChild=e.removeChildAt=e.removeAllChildren=function(){},e._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},e._getFrameIndex=function(t,e){var i,n=e.getAnimation(t);return n||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(n=e.getAnimation(i))),n&&n.frames[0]},e._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._updateText=function(){var e,n=0,a=0,r=this._oldProps,s=!1,o=this.spaceWidth,h=this.lineHeight,l=this.spriteSheet,c=t._spritePool,u=this.children,d=0,f=u.length;for(var p in r)r[p]!=this[p]&&(r[p]=this[p],s=!0);if(s){var m=!!this._getFrame(" ",l);m||o||(o=this._getSpaceWidth(l)),h||(h=this._getLineHeight(l));for(var g=0,v=this.text.length;v>g;g++){var _=this.text.charAt(g);if(" "!=_||m)if("\n"!=_&&"\r"!=_){var b=this._getFrameIndex(_,l);null!=b&&(f>d?e=u[d]:(u.push(e=c.length?c.pop():new i.Sprite),e.parent=this,f++),e.spriteSheet=l,e.gotoAndStop(b),e.x=n,e.y=a,d++,n+=e.getBounds().width+this.letterSpacing)}else"\r"==_&&"\n"==this.text.charAt(g+1)&&g++,n=0,a+=h;else n+=o}for(;f>d;)c.push(e=u.pop()),e.parent=null,f--;c.length>t.maxPoolSize&&(c.length=t.maxPoolSize)}},i.BitmapText=i.promote(t,"Container")}(),i=i||{},function(){"use strict";function t(e,n,a,r){this.Container_constructor(),!t.inited&&t.init(),this.mode=e||t.INDEPENDENT,this.startPosition=n||0,this.loop=a,this.currentFrame=0,this.timeline=new i.Timeline(null,r,{paused:!0,position:n,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function e(){throw"MovieClipPlugin cannot be instantiated."}var n=i.extend(t,i.Container);t.INDEPENDENT="independent",t.SINGLE_FRAME="single",t.SYNCHED="synched",t.inited=!1,t.init=function(){t.inited||(e.install(),t.inited=!0)},n.getLabels=function(){return this.timeline.getLabels()},n.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},n.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(n,{labels:{get:n.getLabels},currentLabel:{get:n.getCurrentLabel},totalFrames:{get:n.getDuration},duration:{get:n.getDuration}})}catch(t){}n.initialize=t,n.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},n.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this._updateTimeline(),this.Container_draw(t,e),!0)},n.play=function(){this.paused=!1},n.stop=function(){this.paused=!0},n.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},n.gotoAndStop=function(t){this.paused=!0,this._goto(t)},n.advance=function(e){var i=t.INDEPENDENT;if(this.mode==i){for(var n=this,a=n.framerate;(n=n.parent)&&null==a;)n.mode==i&&(a=n._framerate);this._framerate=a;var r=null!=a&&-1!=a&&null!=e?e/(1e3/a)+this._t:1,s=0|r;for(this._t=r-s;!this.paused&&s--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},n.clone=function(){throw"MovieClip cannot be cloned."},n.toString=function(){return"[MovieClip (name="+this.name+")]"},n._tick=function(t){this.advance(t&&t.delta),this.Container__tick(t)},n._goto=function(t){var e=this.timeline.resolve(t);null!=e&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=e,this._t=0,this._updateTimeline())},n._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},n._updateTimeline=function(){var e=this.timeline,n=this.mode!=t.INDEPENDENT;e.loop=null==this.loop||this.loop;var a=n?this.startPosition+(this.mode==t.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,r=n||!this.actionsEnabled?i.Tween.NONE:null;if(this.currentFrame=e._calcPosition(a),e.setPosition(a,r),this._prevPosition=e._prevPosition,this._prevPos!=e._prevPos){for(var s in this.currentFrame=this._prevPos=e._prevPos,this._managed)this._managed[s]=1;for(var o=e._tweens,h=0,l=o.length;l>h;h++){var c=o[h],u=c._target;if(u!=this&&!c.passive){var d=c._stepPosition;u instanceof i.DisplayObject?this._addManagedChild(u,d):this._setState(u.state,d)}}var f=this.children;for(h=f.length-1;h>=0;h--){var p=f[h].id;1==this._managed[p]&&(this.removeChildAt(h),delete this._managed[p])}}},n._setState=function(t,e){if(t)for(var i=t.length-1;i>=0;i--){var n=t[i],a=n.t,r=n.p;for(var s in r)a[s]=r[s];this._addManagedChild(a,e)}},n._addManagedChild=function(e,i){e._off||(this.addChildAt(e,0),e instanceof t&&(e._synchOffset=i,e.mode==t.INDEPENDENT&&e.autoReset&&!this._managed[e.id]&&e._reset()),this._managed[e.id]=2)},n._getBounds=function(t,e){var i=this.DisplayObject_getBounds();return i||(this._updateTimeline(),this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame]))),i?this._transformBounds(i,t,e):this.Container__getBounds(t,e)},i.MovieClip=i.promote(t,"Container"),e.priority=100,e.install=function(){i.Tween.installPlugin(e,["startPosition"])},e.init=function(t,e,i){return i},e.step=function(){},e.tween=function(e,i,n,a,r,s){return e.target instanceof t?1==s?r[i]:a[i]:n}}(),i=i||{},function(){"use strict";function t(){throw"SpriteSheetUtils cannot be instantiated"}var e=i.createCanvas?i.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,i,n,a){if(i||n||a){var r=0;i&&t._flip(e,++r,!0,!1),n&&t._flip(e,++r,!1,!0),a&&t._flip(e,++r,!0,!0)}},t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var n=e.getFrame(i);if(!n)return null;var a=n.rect,r=t._workingCanvas;r.width=a.width,r.height=a.height,t._workingContext.drawImage(n.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height);var s=document.createElement("img");return s.src=r.toDataURL("image/png"),s},t.mergeAlpha=function(t,e,n){n||(n=i.createCanvas?i.createCanvas():document.createElement("canvas")),n.width=Math.max(e.width,t.width),n.height=Math.max(e.height,t.height);var a=n.getContext("2d");return a.save(),a.drawImage(t,0,0),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0),a.restore(),n},t._flip=function(e,i,n,a){for(var r=e._images,s=t._workingCanvas,o=t._workingContext,h=r.length/i,l=0;h>l;l++){var c=r[l];c.__tmp=l,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,s.width+1,s.height+1),s.width=c.width,s.height=c.height,o.setTransform(n?-1:1,0,0,a?-1:1,n?c.width:0,a?c.height:0),o.drawImage(c,0,0);var u=document.createElement("img");u.src=s.toDataURL("image/png"),u.width=c.width,u.height=c.height,r.push(u)}var d=e._frames,f=d.length/i;for(l=0;f>l;l++){var p=(c=d[l]).rect.clone(),m={image:u=r[c.image.__tmp+h*i],rect:p,regX:c.regX,regY:c.regY};n&&(p.x=u.width-p.x-p.width,m.regX=p.width-c.regX),a&&(p.y=u.height-p.y-p.height,m.regY=p.height-c.regY),d.push(m)}var g="_"+(n?"h":"")+(a?"v":""),v=e._animations,_=e._data,b=v.length/i;for(l=0;b>l;l++){var y=v[l],w={name:y+g,speed:(c=_[y]).speed,next:c.next,frames:[]};c.next&&(w.next+=g);for(var E=0,x=(d=c.frames).length;x>E;E++)w.frames.push(d[E]+f*i);_[w.name]=w,v.push(w.name)}},i.SpriteSheetUtils=t}(),i=i||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var e=i.extend(t,i.EventDispatcher);t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.addFrame=function(e,i,n,a,r){if(this._data)throw t.ERR_RUNNING;var s=i||e.bounds||e.nominalBounds;return!s&&e.getBounds&&(s=e.getBounds()),s?(n=n||1,this._frames.push({source:e,sourceRect:s,scale:n,funct:a,data:r,index:this._frames.length,height:s.height*n})-1):null},e.addAnimation=function(e,i,n,a){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:i,next:n,speed:a}},e.addMovieClip=function(e,i,n,a,r,s){if(this._data)throw t.ERR_RUNNING;var o=e.frameBounds,h=i||e.bounds||e.nominalBounds;if(!h&&e.getBounds&&(h=e.getBounds()),h||o){var l,c,u=this._frames.length,d=e.timeline.duration;for(l=0;d>l;l++){var f=o&&o[l]?o[l]:h;this.addFrame(e,f,n,this._setupMovieClipFrame,{i:l,f:a,d:r})}var p=e.timeline._labels,m=[];for(var g in p)m.push({index:p[g],label:g});if(m.length)for(m.sort(function(t,e){return t.index-e.index}),l=0,c=m.length;c>l;l++){for(var v=m[l].label,_=u+m[l].index,b=u+(l==c-1?d:m[l+1].index),y=[],w=_;b>w;w++)y.push(w);(!s||(v=s(v,e,_,b)))&&this.addAnimation(v,y,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,framerate:this.framerate,animations:this._animations};var a=this._frames.slice();if(a.sort(function(t,e){return t.height<=e.height?-1:1}),a[a.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var r=0,s=0,o=0;a.length;){var h=this._fillRow(a,r,o,n,e);if(h.w>s&&(s=h.w),r+=h.h,!h.h||!a.length){var l=i.createCanvas?i.createCanvas():document.createElement("canvas");l.width=this._getSize(s,this.maxWidth),l.height=this._getSize(r,this.maxHeight),this._data.images[o]=l,h.h||(s=r=0,o++)}}},e._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},e._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e._fillRow=function(e,n,a,r,s){for(var o=this.maxWidth,h=this.maxHeight-(n+=s),l=s,c=0,u=e.length-1;u>=0;u--){var d=e[u],f=this._scale*d.scale,p=d.sourceRect,m=d.source,g=Math.floor(f*p.x-s),v=Math.floor(f*p.y-s),_=Math.ceil(f*p.height+2*s),b=Math.ceil(f*p.width+2*s);if(b>o)throw t.ERR_DIMENSIONS;_>h||l+b>o||(d.img=a,d.rect=new i.Rectangle(l,n,b,_),c=c||_,e.splice(u,1),r[d.index]=[l,n,b,_,a,Math.round(-g+f*m.regX-s),Math.round(-v+f*m.regY-s)],l+=b)}return{w:l,h:c}},e._endBuild=function(){this.spriteSheet=new i.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,n=!1;e>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var a=this;this._timerID=setTimeout(function(){a._run()},50-t)}var r=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new i.Event("progress");s.progress=r,this.dispatchEvent(s)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,n=t.sourceRect,a=this._data.images[t.img].getContext("2d");return t.funct&&t.funct(t.source,t.data),a.save(),a.beginPath(),a.rect(i.x,i.y,i.width,i.height),a.clip(),a.translate(Math.ceil(i.x-n.x*e),Math.ceil(i.y-n.y*e)),a.scale(e,e),t.source.draw(a),a.restore(),++this._index<this._frames.length},i.SpriteSheetBuilder=i.promote(t,"EventDispatcher")}(),i=i||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var e=i.extend(t,i.DisplayObject);e.isVisible=function(){return null!=this.htmlElement},e.draw=function(){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var e=this.getStage();e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(){var t=this.htmlElement;if(t){var e=t.style,n=this.getConcatenatedDisplayProps(this._props),a=n.matrix,r=n.visible?"visible":"hidden";if(r!=e.visibility&&(e.visibility=r),n.visible){var s=this._oldProps,o=s&&s.matrix,h=1e4;if(!o||!o.equals(a)){var l="matrix("+(a.a*h|0)/h+","+(a.b*h|0)/h+","+(a.c*h|0)/h+","+(a.d*h|0)/h+","+(a.tx+.5|0);e.transform=e.WebkitTransform=e.OTransform=e.msTransform=l+","+(a.ty+.5|0)+")",e.MozTransform=l+"px,"+(a.ty+.5|0)+"px)",s||(s=this._oldProps=new i.DisplayProps(!0,NaN)),s.matrix.copy(a)}s.alpha!=n.alpha&&(e.opacity=""+(n.alpha*h|0)/h,s.alpha=n.alpha)}}},i.DOMElement=i.promote(t,"DisplayObject")}(),i=i||{},function(){"use strict";function t(){}var e=t.prototype;e.getBounds=function(t){return t},e.applyFilter=function(t,e,i,n,a,r,s,o){r=r||t,null==s&&(s=e),null==o&&(o=i);try{var h=t.getImageData(e,i,n,a)}catch(t){return!1}return!!this._applyFilter(h)&&(r.putImageData(h,s,o),!0)},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},e._applyFilter=function(){return!0},i.Filter=t}(),i=i||{},function(){"use strict";function t(t,e,i){(isNaN(t)||0>t)&&(t=0),(isNaN(e)||0>e)&&(e=0),(isNaN(i)||1>i)&&(i=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|i}var e=i.extend(t,i.Filter);t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(t){var e=0|this.blurX,n=0|this.blurY;if(0>=e&&0>=n)return t;var a=Math.pow(this.quality,.2);return(t||new i.Rectangle).pad(e*a+1,n*a+1,e*a+1,n*a+1)},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},e._applyFilter=function(e){var i=this.blurX>>1;if(isNaN(i)||0>i)return!1;var n=this.blurY>>1;if(isNaN(n)||0>n)return!1;if(0==i&&0==n)return!1;var a=this.quality;(isNaN(a)||1>a)&&(a=1),(a|=0)>3&&(a=3),1>a&&(a=1);var r=e.data,s=0,o=0,h=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,b=0,y=0,w=i+i+1|0,E=n+n+1|0,x=0|e.width,S=0|e.height,C=x-1|0,M=S-1|0,O=i+1|0,I=n+1|0,P={r:0,b:0,g:0,a:0},T=P;for(h=1;w>h;h++)T=T.n={r:0,b:0,g:0,a:0};T.n=P;var j={r:0,b:0,g:0,a:0},D=j;for(h=1;E>h;h++)D=D.n={r:0,b:0,g:0,a:0};D.n=j;for(var k=null,R=0|t.MUL_TABLE[i],F=0|t.SHG_TABLE[i],L=0|t.MUL_TABLE[n],A=0|t.SHG_TABLE[n];a-- >0;){d=u=0;var N=R,B=F;for(o=S;--o>-1;){for(f=O*(v=r[0|u]),p=O*(_=r[u+1|0]),m=O*(b=r[u+2|0]),g=O*(y=r[u+3|0]),T=P,h=O;--h>-1;)T.r=v,T.g=_,T.b=b,T.a=y,T=T.n;for(h=1;O>h;h++)l=u+((h>C?C:h)<<2)|0,f+=T.r=r[l],p+=T.g=r[l+1],m+=T.b=r[l+2],g+=T.a=r[l+3],T=T.n;for(k=P,s=0;x>s;s++)r[u++]=f*N>>>B,r[u++]=p*N>>>B,r[u++]=m*N>>>B,r[u++]=g*N>>>B,l=d+((l=s+i+1)<C?l:C)<<2,f-=k.r-(k.r=r[l]),p-=k.g-(k.g=r[l+1]),m-=k.b-(k.b=r[l+2]),g-=k.a-(k.a=r[l+3]),k=k.n;d+=x}for(N=L,B=A,s=0;x>s;s++){for(f=I*(v=r[u=s<<2|0])|0,p=I*(_=r[u+1|0])|0,m=I*(b=r[u+2|0])|0,g=I*(y=r[u+3|0])|0,D=j,h=0;I>h;h++)D.r=v,D.g=_,D.b=b,D.a=y,D=D.n;for(c=x,h=1;n>=h;h++)u=c+s<<2,f+=D.r=r[u],p+=D.g=r[u+1],m+=D.b=r[u+2],g+=D.a=r[u+3],D=D.n,M>h&&(c+=x);if(u=s,k=j,a>0)for(o=0;S>o;o++)r[(l=u<<2)+3]=y=g*N>>>B,y>0?(r[l]=f*N>>>B,r[l+1]=p*N>>>B,r[l+2]=m*N>>>B):r[l]=r[l+1]=r[l+2]=0,l=s+((l=o+I)<M?l:M)*x<<2,f-=k.r-(k.r=r[l]),p-=k.g-(k.g=r[l+1]),m-=k.b-(k.b=r[l+2]),g-=k.a-(k.a=r[l+3]),k=k.n,u+=x;else for(o=0;S>o;o++)r[(l=u<<2)+3]=y=g*N>>>B,y>0?(y=255/y,r[l]=(f*N>>>B)*y,r[l+1]=(p*N>>>B)*y,r[l+2]=(m*N>>>B)*y):r[l]=r[l+1]=r[l+2]=0,l=s+((l=o+I)<M?l:M)*x<<2,f-=k.r-(k.r=r[l]),p-=k.g-(k.g=r[l+1]),m-=k.b-(k.b=r[l+2]),g-=k.a-(k.a=r[l+3]),k=k.n,u+=x}}return!0},i.BlurFilter=i.promote(t,"Filter")}(),i=i||{},function(){"use strict";function t(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var e=i.extend(t,i.Filter);e.clone=function(){var e=new t(this.alphaMap);return e._alphaMap=this._alphaMap,e._mapData=this._mapData,e},e.toString=function(){return"[AlphaMapFilter]"},e._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,n=0,a=e.length;a>n;n+=4)e[n+3]=i[n]||0;return!0},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,n=e;e instanceof HTMLCanvasElement?t=n.getContext("2d"):((n=i.createCanvas?i.createCanvas():document.createElement("canvas")).width=e.width,n.height=e.height,(t=n.getContext("2d")).drawImage(e,0,0));try{var a=t.getImageData(0,0,e.width,e.height)}catch(t){return!1}return this._mapData=a.data,!0},i.AlphaMapFilter=i.promote(t,"Filter")}(),i=i||{},function(){"use strict";function t(t){this.mask=t}var e=i.extend(t,i.Filter);e.applyFilter=function(t,e,i,n,a,r,s,o){return!this.mask||(null==s&&(s=e),null==o&&(o=i),(r=r||t).save(),t==r&&(r.globalCompositeOperation="destination-in",r.drawImage(this.mask,s,o),r.restore(),!0))},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},i.AlphaMaskFilter=i.promote(t,"Filter")}(),i=i||{},function(){"use strict";function t(t,e,i,n,a,r,s,o){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=n?n:1,this.redOffset=a||0,this.greenOffset=r||0,this.blueOffset=s||0,this.alphaOffset=o||0}var e=i.extend(t,i.Filter);e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e._applyFilter=function(t){for(var e=t.data,i=e.length,n=0;i>n;n+=4)e[n]=e[n]*this.redMultiplier+this.redOffset,e[n+1]=e[n+1]*this.greenMultiplier+this.greenOffset,e[n+2]=e[n+2]*this.blueMultiplier+this.blueOffset,e[n+3]=e[n+3]*this.alphaMultiplier+this.alphaOffset;return!0},i.ColorFilter=i.promote(t,"Filter")}(),i=i||{},function(){"use strict";function t(t,e,i,n){this.setColor(t,e,i,n)}var e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},e.reset=function(){return this.copy(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},e.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(e){return 0==e||isNaN(e)?this:(0>(e=this._cleanValue(e,100))?i=127+e/100*127:i=127*(i=0==(i=e%1)?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[1+(e<<0)]*i)+127,this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this);var i},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;var e=1+((t=this._cleanValue(t,100))>0?3*t/100:t/100),i=.3086,n=.6094,a=.082;return this._multiplyMatrix([i*(1-e)+e,n*(1-e),a*(1-e),0,0,i*(1-e),n*(1-e)+e,a*(1-e),0,0,i*(1-e),n*(1-e),a*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),n=.213,a=.715,r=.072;return this._multiplyMatrix([n+e*(1-n)+i*-n,a+e*-a+i*-a,r+e*-r+i*(1-r),0,0,n+e*-n+.143*i,a+e*(1-a)+.14*i,r+e*-r+-.283*i,0,0,n+e*-n+-.787*i,a+e*-a+i*a,r+e*(1-r)+i*r,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return(e=this._fixMatrix(e)).length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},e.clone=function(){return(new t).copy(this)},e.toArray=function(){for(var e=[],i=0,n=t.LENGTH;n>i;i++)e[i]=this[i];return e},e.copy=function(e){for(var i=t.LENGTH,n=0;i>n;n++)this[n]=e[n];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){var e,i,n,a=[];for(e=0;5>e;e++){for(i=0;5>i;i++)a[i]=this[i+5*e];for(i=0;5>i;i++){var r=0;for(n=0;5>n;n++)r+=t[i+5*n]*a[n];this[i+5*e]=r}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},i.ColorMatrix=t}(),i=i||{},function(){"use strict";function t(t){this.matrix=t}var e=i.extend(t,i.Filter);e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},e._applyFilter=function(t){for(var e,i,n,a,r=t.data,s=r.length,o=this.matrix,h=o[0],l=o[1],c=o[2],u=o[3],d=o[4],f=o[5],p=o[6],m=o[7],g=o[8],v=o[9],_=o[10],b=o[11],y=o[12],w=o[13],E=o[14],x=o[15],S=o[16],C=o[17],M=o[18],O=o[19],I=0;s>I;I+=4)e=r[I],i=r[I+1],n=r[I+2],a=r[I+3],r[I]=e*h+i*l+n*c+a*u+d,r[I+1]=e*f+i*p+n*m+a*g+v,r[I+2]=e*_+i*b+n*y+a*w+E,r[I+3]=e*x+i*S+n*C+a*M+O;return!0},i.ColorMatrixFilter=i.promote(t,"Filter")}(),i=i||{},function(){"use strict";function t(){throw"Touch cannot be instantiated"}t.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},t.enable=function(e,i,n){return!!(e&&e.canvas&&t.isSupported())&&(!!e.__touch||(e.__touch={pointers:{},multitouch:!i,preventDefault:!n,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0))},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e),delete e.__touch)},t._IOS_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",n,!1),i.addEventListener("touchmove",n,!1),i.addEventListener("touchend",n,!1),i.addEventListener("touchcancel",n,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,n=e.type,a=0,r=i.length;r>a;a++){var s=i[a],o=s.identifier;s.target==t.canvas&&("touchstart"==n?this._handleStart(t,o,e,s.pageX,s.pageY):"touchmove"==n?this._handleMove(t,o,e,s.pageX,s.pageY):("touchend"==n||"touchcancel"==n)&&this._handleEnd(t,o,e))}}},t._IE_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",n,!1),window.addEventListener("MSPointerMove",n,!1),window.addEventListener("MSPointerUp",n,!1),window.addEventListener("MSPointerCancel",n,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",n,!1),window.addEventListener("pointermove",n,!1),window.addEventListener("pointerup",n,!1),window.addEventListener("pointercancel",n,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,n=e.pointerId,a=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;a[n]=!0,this._handleStart(t,n,e,e.pageX,e.pageY)}else a[n]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,n,e,e.pageX,e.pageY):("MSPointerUp"==i||"MSPointerCancel"==i||"pointerup"==i||"pointercancel"==i)&&(delete a[n],this._handleEnd(t,n,e)))}},t._handleStart=function(t,e,i,n,a){var r=t.__touch;if(r.multitouch||!r.count){var s=r.pointers;s[e]||(s[e]=!0,r.count++,t._handlePointerDown(e,i,n,a))}},t._handleMove=function(t,e,i,n,a){t.__touch.pointers[e]&&t._handlePointerMove(e,i,n,a)},t._handleEnd=function(t,e,i){var n=t.__touch,a=n.pointers;a[e]&&(n.count--,t._handlePointerUp(e,i,!0),delete a[e])},i.Touch=t}(),i=i||{},function(){"use strict";var t=i.EaselJS=i.EaselJS||{};t.version="0.8.2",t.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"}(),e.Easel=i},chbcihghjd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var n=F(i("dbahhcabjf")),a=F(i("dbafiicfja")),r=F(i("dadhheahfi")),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=F(i("eadfaddcj")),h=F(i("gbfffciea")),l=F(i("djcchigfih")),c=i("dajffajabh"),u=F(c),d=F(i("djbhiedbef")),f=F(i("ddajbaceej")),p=i("dhfbfehaef"),m=F(p),g=F(i("dacbgadjcd")),v=F(i("dbciicjiad")),_=F(i("bdiiahhjbe")),b=F(i("bjbedjfe")),y=F(i("fbjjefaic")),w=i("ejbdjaifi"),E=i("bfjajhbdf"),x=F(E),S=F(i("bjieiiccce")),C=F(i("dfjfejdjjh")),M=F(i("bihdhbjih")),O=R(i("cajijabhgb")),I=i("chhhffajfi"),P=R(i("ddhijeejag")),T=i("bgddggdhc"),j=R(i("bcjcbbafcj")),D=R(i("dhajefgece")),k=i("cicgeajfge");function R(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function F(t){return t&&t.__esModule?t:{default:t}}var L=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.setRefSearch=function(t){return i.refSearch=t},i.setRefSearchHotkeys=function(t){return i.refSearchHotkeys=t},i.setRefGallery=function(t){return i.refGallery=t},i._search=function(t,e){i._hasPendingSearch=!1;var n=D.search(t,e).cancellable().then(function(e){n===i._searchPromise&&(i._addSearchResults(t,e),i.setState({isSearching:!1}))}).catch(Promise.CancellationError,function(){}).catch(function(t){_.default.errorVerbose("Image search failed")(t),h.default.openToast(P.createElement(x.default,{msg:l10n.t(562),id:(0,E.genId)()})),n===i._searchPromise&&i.setState({isSearching:!1})}).finally(function(){n===i._searchPromise&&(i._searchPromise=null)});i._searchPromise=n,i.setState({isSearching:!0})},i.handleUserInput=function(t){var e=(t||"").trim();if(!e)return i._cancelSearch(),void i._resetState();(0,I.numCodepoints)(e)<o.default.FTS_MIN_CHARS||e!==i.state.query&&(i._cancelSearch(),i._resetState(),i._requestSearch(e))},i.handleRequestMoreImages=function(){i._hasPendingSearch||i._searchPromise||!i.state.totalEstimatedMatches||i.state.nextOffset>=i.state.totalEstimatedMatches||i._requestSearch(i.state.query,i.state.nextOffset)},i.handleImageClick=function(t){var e=i.state.imageData[t];if(e){var n=e.contentUrl;(j.isElectron?C.default.getRetry(n,S.default.RESP_TYPE.BLOB).then(function(t){if(200!==t.status)throw new O.ServerStatusError(null,n,t.status);return t.response}):M.default.downloadImage(n)).checkpoint(i.props.rejectOnUnmount()).then(function(t){if(!(t instanceof Blob))throw new O.ImageError("Server did not respond with image bytes",n);i.props.onImageSelected(t,e.hostPageUrl)}).catch(O.Unmount,function(){}).catch(function(t){_.default.errorVerbose("Image search failed")(t),h.default.openToast(P.createElement(x.default,{msg:l10n.t(559),id:(0,E.genId)()}))})}},i.focusSearch=function(){(0,p.shouldIndicateFocus)(),f.default.focus(i.refSearch)},i.focusGallery=function(t){t.repeat||i.refGallery&&i.refSearch&&i.refSearch.isAtEnd()&&(t.preventDefault(),t.stopPropagation(),(0,p.shouldIndicateFocus)(),f.default.focus((0,T.forbiddenAssertDOMNode)(i.refGallery)))},i.handleSearchFocus=function(t){(0,p.indicateFocus)(i.refSearchHotkeys,["#fbfbfb","#D9F3FF"])},i.state={imageData:{},isSearching:!1,nextOffset:0,query:"",thumbnails:[],totalEstimatedMatches:0},i._hasPendingSearch=!1,i._searchPromise=null,i._debouncedSearch=i.props.debounce(i._search,750),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,P.Component),s(e,[{key:"componentWillUnmount",value:function(){this._cancelSearch()}},{key:"_requestSearch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._hasPendingSearch=!0,this._debouncedSearch(t,e)}},{key:"_cancelSearch",value:function(){this._hasPendingSearch&&(this._debouncedSearch.cancel(),this._hasPendingSearch=!1),this._searchPromise&&this._searchPromise.cancel()}},{key:"_resetState",value:function(){this.setState({imageData:{},isSearching:!1,nextOffset:0,query:"",thumbnails:[],totalEstimatedMatches:0})}},{key:"_addSearchResults",value:function(t,e){this.setState(function(i,s){var o=(0,r.default)(e.value,function(t){return t.thumbnailUrl}),h=(0,a.default)(e.value,function(t){return{id:t.imageId,thumbUrl:t.thumbnailUrl}}),l=e.value.length,c={};return i.query===t?(c.nextOffset=e.nextOffset?e.nextOffset:i.nextOffset+l,c.thumbnails=(0,n.default)(i.thumbnails,h),c.totalEstimatedMatches=e.totalEstimatedMatches,c.imageData=Object.assign(o,i.imageData)):(c.imageData=o,c.nextOffset=e.nextOffset?e.nextOffset:l,c.query=t,c.thumbnails=h,c.totalEstimatedMatches=e.totalEstimatedMatches),c})}},{key:"render",value:function(){var t=c.DRAWER_HEADER_TYPE.POPUP,e={down:this.focusGallery},i=void 0;return i=0===this.state.thumbnails.length?this.state.isSearching?P.createElement(k.SearchingImages,null):this.state.query?P.createElement(k.ImageSearchEmpty,null):P.createElement(k.BeforeImageSearch,null):P.createElement(g.default,{ref:this.setRefGallery,canLoadMore:this.state.nextOffset<this.state.totalEstimatedMatches,isLoadingMore:this.state.isSearching,thumbnails:this.state.thumbnails,onFocusPrev:this.focusSearch,onImageClick:this.handleImageClick,onRequestMoreImages:this.handleRequestMoreImages}),P.createElement(l.default,null,P.createElement(u.default,{title:l10n.t(566),type:t,onBack:this.props.onBack,onCancel:this.props.onCancel}),P.createElement(d.default,null,P.createElement(m.default,{ref:this.setRefSearchHotkeys,handlers:e,onFocus:this.handleSearchFocus},P.createElement(v.default,{ref:this.setRefSearch,placeholder:l10n.t(563),onSearch:this.handleUserInput,loading:this.state.isSearching})),i))}}]),e}();L.displayName="ImageSearchDrawer";e.Component=L;e.default=(0,y.default)((0,b.default)((0,w.hoc)(L)))},dacbgadjcd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i("dbafiicfja")),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=y(i("eadfaddcj")),s=i("cgejchjdhj"),o=y(i("ddajbaceej")),h=i("dhfbfehaef"),l=y(h),c=y(i("bdiiahhjbe")),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),d=y(i("dcaibchbg")),f=y(i("becfabjeeg")),p=y(i("fbjjefaic")),m=i("ejbdjaifi"),g=y(i("ceffhbhahb")),v=y(i("fffjbcghd")),_=y(i("cahfddcdga")),b=y(i("bcddhhfhda"));function y(t){return t&&t.__esModule?t:{default:t}}function w(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var E=3,x=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,s=Array(a),o=0;o<a;o++)s[o]=arguments[o];return i=n=w(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),n.state={},n.setRefBody=function(t){return n.refBody=t},n.refImages=new Map,n.setRefImage=function(t,e){e?n.refImages.set(t,e):n.refImages.delete(t)},n.setImageRefCache=new b.default(n.setRefImage),n.selection=new d.default(n.props.thumbnails,function(t){return t.id}),n.handleMouseDown=function(t){t.preventDefault(),t.stopPropagation()},n.handleClick=function(t){var e=t.target;n.props.onImageClick&&1===e.nodeType&&"IMG"===e.tagName&&n.props.onImageClick(e.src)},n.handleEnter=function(t){var e=n.selection.getVal();c.default.assert(e,"No value selected, but enter clicked")(),n.props.onImageClick&&e&&n.props.onImageClick(e.thumbUrl)},n._requestMoreImagesIfNeeded=function(){if(!n.props.isLoadingMore&&n.props.canLoadMore&&n.props.onRequestMoreImages){if(!n.refBody)throw new Error("Requesting more images when body not rendered");n.refBody.scrollTop+r.default.SCROLL_FUDGE>n.refBody.scrollHeight-n.refBody.clientHeight&&n.props.onRequestMoreImages()}},n.handleScroll=n.props.throttle(n._requestMoreImagesIfNeeded,100),n.selectPrev=function(t){t.preventDefault(),t.stopPropagation(),n.selection.setPrev(!1),n._updateSelected(!0,!0)},n.selectNext=function(t){t.preventDefault(),t.stopPropagation(),n.selection.setNext(!1),n._updateSelected(!0,!0)},n.selectPrevRow=function(t){if(t.preventDefault(),t.stopPropagation(),0===n.selection.index&&n.props.onFocusPrev)n.props.onFocusPrev();else{var e=Math.max(n.selection.index-E,0);n.selection.set(e,!1,!1),n._updateSelected(!0,!0)}},n.selectNextRow=function(t){t.preventDefault(),t.stopPropagation(),n.selection.set(n.selection.index+E,!1,!1),n._updateSelected(!0,!0)},n.handleFocus=function(t){t.stopPropagation(),t.preventDefault(),(null==n.selection.index||n.selection.index<0)&&n.selection.setFirst(!1),n._updateSelected(!0,!1);var e=(0,_.default)(n.refImages.get(`${n.selection.index}`)).getElementsByClassName(v.default.imageGalleryItemOverlay);if(1!==e.length)throw new Error(`Unexpected number of overlay elements ${e.length}`);(0,h.indicateFocus)(e[0],void 0,void 0,{backgroundColorAlpha:[0,.5]})},n.handleRequestDismiss=function(){n.selection.unset(),n.setState({selectedImage:void 0})},w(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),a(e,[{key:"UNSAFE_componentWillMount",value:function(){this._updateSelected()}},{key:"componentDidUpdate",value:function(){this._requestMoreImagesIfNeeded(),this.selection.init(this.props.thumbnails,!1),this._updateSelected()}},{key:"_updateSelected",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=this.selection.getVal();if(e&&this.state.selectedImage!==e&&(this.setState({selectedImage:e}),this.selection.index>-1)){var i=this.refImages.get(`${this.selection.index}`);o.default.focus(i),t&&i&&(0,s.scrollIntoViewIfNeeded)(i,!1)}}},{key:"render",value:function(){var t=this,e={down:this.selectNextRow,enter:this.handleEnter,left:this.selectPrev,right:this.selectNext,up:this.selectPrevRow},i=(0,n.default)(this.props.thumbnails,function(e,i){var n=e.id,a=e.thumbUrl,r=!!t.state.selectedImage&&t.state.selectedImage.id===n,s=(0,g.default)(v.default.imageGalleryItem,{[v.default.selected]:r}),o=u.createElement("div",{className:v.default.imageGalleryItemOverlay});return u.createElement("div",{key:n,ref:t.setImageRefCache.getRefSetter(`${i}`),className:s,tabIndex:-1},o,u.createElement("img",{onClick:t.handleClick,className:v.default.imageGalleryItemImage,src:a}))}),a=this.props.isLoadingMore?u.createElement("div",{tabIndex:-1,className:v.default.imageGalleryFooter},u.createElement(f.default,{stroke:6,size:24})):null;return u.createElement(l.default,{className:v.default.imageGallery,"data-tab":3,handlers:e,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown},u.createElement("div",{ref:this.setRefBody,className:v.default.imageGalleryList,onScroll:this.handleScroll},i,u.createElement("div",{tabIndex:-1,className:v.default.imageGalleryItemSpacer}),u.createElement("div",{tabIndex:-1,className:v.default.imageGalleryItemSpacer}),u.createElement("div",{tabIndex:-1,className:v.default.imageGalleryItemSpacer}),a))}}]),e}();x.defaultProps={thumbnails:[]},x.displayName="ImageGallery",e.default=(0,p.default)((0,m.hocWithDefaults)(x))},dadhheahfi:function(t,e,i){var n=i("hgiaacebd"),a=i("dgaadghiig")(function(t,e,i){n(t,i,e)});t.exports=a},dbbiihddig:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=F(i("iidhbgeed")),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=F(i("gbfffciea")),s=F(i("biddiiafgd")),o=F(i("eadfaddcj")),h=F(i("dhigahgdjb")),l=F(i("dcjhajfghf")),c=i("cgffhfegce"),u=F(i("baggaibbia")),d=F(i("ccaaiecfib")),f=F(i("hcjfjhdic")),p=F(i("cajbifjffe")),m=F(i("bfdcadbbif")),g=F(i("bdiiahhjbe")),v=F(i("baffhfhhda")),_=F(i("bhhdeihhhf")),b=i("chcadgfgad"),y=F(b),w=i("dgfecega"),E=F(w),x=F(i("ebfgabegga")),S=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),C=F(i("didfdhbecg")),M=F(i("eafibdfg")),O=F(i("caffijjhc")),I=F(i("dbjbhajgfd")),P=F(i("cffibfiejh")),T=F(i("ecciceaiej")),j=F(i("ejeehdija")),D=F(i("dcjdgceiej")),k=F(i("bfejacaeaj")),R=F(i("cdcaigjjii"));function F(t){return t&&t.__esModule?t:{default:t}}function L(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var A=function(t){function e(){var t,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var p=arguments.length,m=Array(p),w=0;w<p;w++)m[w]=arguments[w];return i=a=L(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(m))),a.state={img:a.props.startImage,hover:!1,imageSize:null},a.setRefImageContainer=function(t){return a.refImageContainer=t},a.setRefImageInput=function(t){return a.refImageInput=t},a.onUpload=function(t){var e=a.refImageInput;if(e)return e.click(),!0},a.removeImage=function(){a.props.onImageSet(),r.default.closeModal()},a.onRemove=function(t){var e=a.props.type===R.default.GROUP?l10n.t(881):l10n.t(885);r.default.openModal(S.createElement(s.default,{onOK:a.removeImage,okText:l10n.t(880),onCancel:function(){return r.default.closeModal()},cancelText:l10n.t(1101)},e))},a.onView=function(){var t=a.refImageContainer,e=a.props,i=e.id,n=e.attachToChat;if(t&&i){var s=h.default.assertGet(i),o={transition:"profile-viewer"};n&&(o.uim=a.context.uim),r.default.openModalMedia(S.createElement(x.default,{contact:s,profilePicThumb:s.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:function(e){e(t)}}),o)}},a.onPaste=function(t){if(a.state.contextMenu){var e=new l.default(t.clipboardData),i=(0,n.default)(e.getFiles(),function(t){return"image"===(0,c.typeFromMimetype)(t.type)});if(i.length){t.preventDefault(),t.stopPropagation(),a.contextClose();var r=i[0];a.onImagePick(r)}}},a.onImageSelected=function(t){a.contextClose();var e=t.target.files[0];if(!e)return!1;a.onImagePick(e),t.target.value=""},a.onImageReceived=function(t,e){t?v.default.loadImage(t).then(function(i){a.setState({img:t}),a.props.onImageSet(t,e)}).catch(function(t){g.default.error("PhotoPicker:onImageReceived failed to load image: "+String(t))();var e=a.props.type===R.default.GROUP?l10n.t(73):l10n.t(138);r.default.openModal(S.createElement(s.default,{onOK:function(){return r.default.closeModal()}},e))}):a.setState({img:null,imageSize:null})},a.onSearch=function(){r.default.openModal(S.createElement(y.default,{type:b.BoxModalType},S.createElement(f.default,{onFinished:a.onImageReceived})))},a.onImagePick=function(t){var e=URL.createObjectURL(t);v.default.loadImage(e).then(function(e){e&&(e.width<o.default.MIN_PIC_SIDE||e.height<o.default.MIN_PIC_SIDE)?r.default.openModal(S.createElement(s.default,{onOK:function(){return r.default.closeModal()}},l10n.t(872,{size:o.default.MIN_PIC_SIDE,_plural:o.default.MIN_PIC_SIDE}))):r.default.openModal(S.createElement(y.default,{type:b.BoxModalType},S.createElement(u.default,{img:t,onFinished:a.onImageReceived,onRetake:a.onUpload})))}).catch(function(t){var e=a.props.type===R.default.GROUP?l10n.t(73):l10n.t(138);r.default.openModal(S.createElement(s.default,{onOK:function(){return r.default.closeModal()}},e))}).finally(function(){URL.revokeObjectURL(e)})},a.onImageClick=function(t){if(a.props.readOnly)a.state.img&&a.onView();else{t.stopPropagation(),t.preventDefault();var e=[];a.props.id&&a.state.img&&e.push(S.createElement(_.default,{a8n:"mi-view-photo",key:"view",action:a.onView},l10n.t(1077))),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&e.push(S.createElement(M.default,{key:"take",onImageTake:a.onImageReceived})),e.push(S.createElement(_.default,{a8n:"mi-upload-photo",key:"upload",action:a.onUpload},l10n.t(1052))),d.default.supportsFeature(d.default.F.BING_IMAGE_SEARCH)&&a.props.type===R.default.GROUP&&e.push(S.createElement(_.default,{a8n:"mi-search-photo",key:"search",action:a.onSearch},l10n.t(1285))),a.state.img&&e.push(S.createElement(_.default,{a8n:"mi-remove-photo",key:"remove",action:a.onRemove},l10n.t(884))),t.persist(),a.setState({contextMenu:{menu:e,event:t}})}},a.contextClose=function(){a.setState({contextMenu:null})},a.onMouseOver=function(t){a.state.hover||a.setState({hover:!0})},a.onMouseEnter=function(t){a.state.hover||a.setState({hover:!0})},a.onMouseLeave=function(t){a.state.hover&&a.setState({hover:!1})},a.onLoad=function(t){var e=t.target.clientWidth,i=t.target.clientHeight;a.setState({imageSize:{width:e,height:i}})},L(a,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,S.Component),a(e,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){t.startImage&&this.props.startImage!==t.startImage?this.setState({img:t.startImage}):this.props.startImage!==t.startImage&&this.setState({img:t.startImage,imageSize:null})}},{key:"render",value:function(){var t=void 0;this.state.img&&(t=S.createElement(E.default,{type:w.FIT_TYPE.COVER,size:this.state.imageSize},S.createElement(p.default,{src:this.state.img,crossOrigin:!1,style:{height:"100%",width:"100%"},onLoad:this.onLoad})));var e=void 0;(this.props.pending||this.state.img&&!this.state.imageSize)&&(e=S.createElement(P.default,null));var i=null;if(!this.props.pending&&!this.props.readOnly&&(!this.state.img||this.state.imageSize)&&(!this.state.img||this.state.contextMenu||this.state.hover)){var n="";switch(this.props.type){case R.default.GROUP:n=this.state.img?l10n.t(269):l10n.t(166);break;case R.default.PROFILE:n=this.state.img?l10n.t(274):l10n.t(172)}i=S.createElement(T.default,{icon:S.createElement(m.default,{name:"camera-light"}),text:n})}var a=this.props.readOnly||this.props.pending||!this.state.imageSize&&this.state.img?function(){}:this.onImageClick,r=void 0;this.state.contextMenu&&(r=S.createElement(O.default,{displayName:"PhotoPickerContextMenu",escapable:!0,popable:!0,requestDismiss:this.contextClose},S.createElement(I.default,{contextMenu:this.state.contextMenu})));var s=void 0;if(this.props.pending||!this.state.img||this.state.img&&!this.state.imageSize){var o=this.props.type===R.default.PROFILE?"default-user":"default-group";s=S.createElement("div",{className:j.default.defaultIcon},S.createElement(m.default,{name:o}))}return S.createElement("div",{className:j.default.container},S.createElement("div",{className:j.default.body,onClick:a,onMouseOver:this.onMouseOver,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onPaste:this.onPaste,ref:this.setRefImageContainer,dir:"ltr"},S.createElement("div",{className:j.default.imageContainer},t,s),S.createElement(C.default,{transitionName:"fade"},e,i)),S.createElement("input",{ref:this.setRefImageInput,type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png",style:{display:"none"},onChange:this.onImageSelected}),r)}}]),e}();A.contextTypes={uim:k.default.instanceOf(D.default)},A.displayName="PhotoPicker",e.default=A},dccciaccbi:function(t,e){t.exports={muted:"_2-iMw",btnSend:"_3TN_b",attributionLink:"_3ynMm",mediaBody:"_2jfnX",attribution:"_3b4jr",footer:"_22aOT",containerBackground:"_3979j",retake:"_1Ff50",retakeIcon:"_25UUh",mediaElementBase:"eqJK3",mediaElement:"_1cz_a eqJK3"}},dcghjbcbii:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=e.RETRY_OPTIONS=void 0;var n=S(i("bebajedcaf")),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),s=S(i("djcchigfih")),o=S(i("dajffajabh")),h=S(i("djbhiedbef")),l=S(i("bidfjbaebi")),c=S(i("fbfedehbb")),u=S(i("jhjhdgfci")),d=S(i("dgidheegej")),f=S(i("gfdchbigi")),p=i("dgfecega"),m=S(p),g=S(i("didfdhbecg")),v=S(i("cdjhjdcbeg")),_=S(i("edbaidcaf")),b=S(i("bfdcadbbif")),y=S(i("dccciaccbi")),w=i("dfjhjafaab"),E=S(i("eceadcicaf")),x=i("ejbdjaifi");function S(t){return t&&t.__esModule?t:{default:t}}var C=361,M=500,O=e.RETRY_OPTIONS={RETAKE:"retake",RESTART:"restart"},I=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.onDoneEditing=function(){var t=i.state.editedMedia;i.saveCanvas(),i.refProfileCropTool&&i.refProfileCropTool.getComponent().crop().then(function(e){var n=e.thumb,a=e.full;i.props.onFinished(n,a),t.cleanUp()})},i.onObjectLoad=function(t){if(t&&t instanceof HTMLElement){var e={};!i.state.editorSize||i.state.editorSize.width===t.clientWidth&&i.state.editorSize.height===t.clientHeight||(e.editorSize={width:t.clientWidth,height:t.clientHeight}),i.state.loaded||(e.loaded=!0),(0,n.default)(e)||i.setState(e)}},i.setRefMediaEditCanvas=function(t){i.mediaEditCanvas=t},i.setRefProfileCropTool=function(t){i.refProfileCropTool=t},i.drawCanvas=function(t,e){i.mediaEditCanvas&&i.mediaEditCanvas.drawCanvas(t,e)},i.saveCanvas=function(){i.mediaEditCanvas&&i.mediaEditCanvas.saveCanvas()},i.updateCanvasSize=function(t,e){i.mediaEditCanvas&&i.mediaEditCanvas.updateCanvasSize(t,e)},i.onCanvasInitialized=function(){i.forceUpdate()},i.state={doneEditing:!1,loaded:!1,editorSize:{width:M,height:C},editedMedia:new f.default(t.img)},i.mediaEditController=new u.default,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),a(e,[{key:"UNSAFE_componentWillMount",value:function(){this.props.listeners.add(this.mediaEditController,"change:isInitialized",this.onCanvasInitialized)}},{key:"render",value:function(){var t=this.props,e=t.attributionUrl,i=t.onRetake,n=t.retryText,a=this.state.loaded?r.createElement("div",{className:y.default.btnSend,key:"btn-send"},r.createElement(v.default,{large:!0,onClick:this.onDoneEditing},r.createElement(b.default,{name:"checkmark-light-l"}))):null,u=void 0;this.mediaEditController.isInitialized&&(u=r.createElement(d.default,{editedMedia:this.state.editedMedia,stage:this.mediaEditController.stage,cropOverlay:this.mediaEditController.cropOverlay,mediaContainer:this.mediaEditController.mediaContainer,drawCanvas:this.drawCanvas,ref:this.setRefProfileCropTool}));var f=r.createElement(c.default,{className:y.default.mediaElement,editedMedia:this.state.editedMedia,mediaEditController:this.mediaEditController,fitType:p.FIT_TYPE.COVER,ref:this.setRefMediaEditCanvas}),E=void 0;if(i){var x=void 0;switch(n){case O.RETAKE:x=l10n.t(909);break;case O.RESTART:default:x=l10n.t(910)}E=r.createElement("div",{className:y.default.retake,onClick:i},r.createElement("div",{className:y.default.retakeIcon},r.createElement(b.default,{name:"refresh-light"})),x)}var S=e?r.createElement("div",{className:y.default.attribution},r.createElement("a",{className:y.default.attributionLink,href:e,target:"_blank"},_.default.hostname(e)),r.createElement("span",null,l10n.t(561),"",r.createElement(l.default,{href:(0,w.getTosUrl)()},l10n.t(567)))):null,I=r.createElement("div",{className:y.default.footer},r.createElement(g.default,{transitionName:"btn"},a),S),P=this.props.imageSize?this.props.imageSize:{width:M,height:C};return r.createElement(s.default,{key:"attach-edit-modal",theme:"edit"},r.createElement(o.default,{title:l10n.t(173),type:"offset",onCancel:this.props.onCancel},E),r.createElement(h.default,{overflow:"hidden"},r.createElement("div",{className:y.default.mediaBody},u,r.createElement("div",{className:y.default.containerBackground},r.createElement(g.default,{transitionName:"capture"},r.createElement(m.default,{type:p.FIT_TYPE.COVER,size:P,onObjectLoad:this.onObjectLoad},f)))),I))}}]),e}();I.displayName="EditImageDrawer";e.Component=I;e.default=(0,E.default)((0,x.hoc)(I))},dgaadghiig:function(t,e,i){var n=i("bibadcdgfe"),a=i("ceigihebcb"),r=i("eacgdgihde"),s=i("ccgdigcbgj");t.exports=function(t,e){return function(i,o){var h=s(i)?n:a,l=e?e():{};return h(i,t,r(o,2),l)}}},dgidheegej:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),r=i("cfabbaghh"),s=d(i("dgjacfgggf")),o=d(i("eadfaddcj")),h=d(i("bfdcadbbif")),l=d(i("bcijfighgd")),c=d(i("eceadcicaf")),u=i("ejbdjaifi");function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var p=1.1,m=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,r=Array(a),h=0;h<a;h++)r[h]=arguments[h];return i=n=f(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r))),n.validateTranslate=function(t,e){var i=n.props.editedMedia.editData,a=(t-i.width/2)*i.scale,r=(t+i.width/2)*i.scale,s=(e+i.height/2)*i.scale,o=(e-i.height/2)*i.scale;return{x:a<-n.cropRadius&&r>n.cropRadius,y:o<-n.cropRadius&&s>n.cropRadius}},n.validateScale=function(t){var e=n.props.editedMedia.editData,i=Math.max(2*n.cropRadius/e.width,2*n.cropRadius/e.height),a=Math.max(t,i);if(e.width*t<n.cropRadius||e.height*t<n.cropRadius)return!1;var r=-n.cropRadius/a+e.width/2,s=n.cropRadius/a-e.width/2,o=-n.cropRadius/a+e.height/2,h=n.cropRadius/a-e.height/2;return{scale:a,offsetX:Math.min(Math.max(e.offsetX,s),r),offsetY:Math.min(Math.max(e.offsetY,h),o)}},n.onPressMove=function(t,e){var i=n.props.editedMedia.editData,a=t.stageX-e.x,r=t.stageY-e.y,s=i.offsetX+a/i.scale,o=i.offsetY+r/i.scale,h=n.validateTranslate(s,o);h.x&&(i.offsetX=s),h.y&&(i.offsetY=o),e.x=t.stageX,e.y=t.stageY,n.props.drawCanvas()},n.onEnlarge=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=n.props.editedMedia.editData,i=0!==t?t:p,a=n.validateScale(e.scale*i);a&&(e.scale=a.scale,e.offsetX=a.offsetX,e.offsetY=a.offsetY,n.props.drawCanvas())},n.onReduce=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=n.props.editedMedia.editData,i=0!==t?t:p,a=n.validateScale(e.scale/i);a&&(e.scale=a.scale,e.offsetX=a.offsetX,e.offsetY=a.offsetY,n.props.drawCanvas())},n.crop=function(){var t=n.props.editedMedia,e=t.editData,i=t.editedImage&&t.editedImage.src,a=void 0;if(!i)return Promise.reject("empty image");var r=2*n.cropRadius,h=r;return r>o.default.MAX_PIC_SIDE?h=o.default.MAX_PIC_SIDE:r<o.default.MIN_PIC_SIDE&&(h=o.default.MIN_PIC_SIDE),s.default.crop(i,(e.width-2*n.cropRadius)/2,(e.height-2*n.cropRadius)/2,2*n.cropRadius,2*n.cropRadius,h,h,s.default.DATA_URL|s.default.CANVAS).then(function(t){var e=t.images;return a=e.dataUrl,s.default.crop(e.canvas,0,0,o.default.PROF_PIC_THUMB_SIDE,o.default.PROF_PIC_THUMB_SIDE)}).then(function(t){return{thumb:t.images.dataUrl,full:a}})},f(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),n(e,[{key:"render",value:function(){var t=this;return a.createElement("div",{className:l.default.scaler},a.createElement("div",{className:l.default.scalerButton,onClick:function(){t.onEnlarge()}},a.createElement(h.default,{name:"plus"})),a.createElement("div",{className:l.default.scalerButton,onClick:function(){t.onReduce()}},a.createElement(h.default,{name:"minus"})))}},{key:"componentDidMount",value:function(){var t=this;this.props.editedMedia.saveEdits();var e=this.props.editedMedia.editData,i=this.props.cropOverlay,n=i.canvas,a=void 0;a=e.baseItem?e.baseItem.getBounds():{width:0,height:0},n.style.display="block",n.width=a.width,n.height=a.height;var s=new r.Easel.Shape;s.graphics.beginFill("rgba(0, 0, 0, 0.1)"),s.graphics.drawRect(0,0,a.width,a.height),s.regX=a.width/2,s.regY=a.height/2,s.x=a.width/2,s.y=a.height/2,s.on("mousedown",function(e){var i={x:e.stageX,y:e.stageY},n=s.on("pressmove",t.onPressMove,null,!1,i);s.on("pressup",function(){s.off("pressmove",n)},null,!0)}),s.cursor="move",this.props.listeners.add(n,"mousewheel",function(e){e.deltaY>0?t.onEnlarge(1.02):t.onReduce(1.02)});var o=n.getContext("2d"),h=n.width,l=n.height,c=h/l>500/361?l/361:h/500;this.cropRadius=Math.min(361,500)/2*.9*c,o.fillStyle="rgba(0, 0, 0, 0.5)",o.fillRect(0,0,h,l),o.globalCompositeOperation="destination-out",o.beginPath(),o.arc(h/2,l/2,this.cropRadius,0,2*Math.PI,!0),o.fillStyle="#ffffff",o.fill(),i.addChild(s),i.update()}}]),e}();m.displayName="ProfileCropTool";e.Component=m;e.default=(0,c.default)((0,u.hoc)(m))},dhajefgece:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.search=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p,n={q:t,SafeSearch:"Strict",appid:c,mkt:f[l10n.getLocale()]||f.en,size:d.MEDIUM,aspect:u.SQUARE,count:i,offset:e},a=o.build(l,n);return r.default.get(a,r.default.RESP_TYPE.JSON).then(function(e){if(!e.response.hasOwnProperty("_type"))throw new s.InvalidServerResponseError(a,status,`Not a valid Bing response: ${JSON.stringify(e.response)}`);if("ErrorResponse"===e.response._type){var i=e.response;throw new s.BingServerError(t,e.status,i)}if("Images"!==e.response._type)throw new s.InvalidServerResponseError(a,status,"Did not receive an image search response, "+`potentially malformed query ${JSON.stringify(e.response)}`);return e.response})};var n,a=i("bjieiiccce"),r=(n=a)&&n.__esModule?n:{default:n},s=h(i("cajijabhgb")),o=h(i("edbaidcaf"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var l="https://www.bingapis.com/api/v6/images/search",c="D41D8CD98F00B204E9800998ECF8427E4F4A7492",u={SQUARE:"Square",WIDE:"Wide",TALL:"Tall",ALL:"All"},d={SMALL:"Small",MEDIUM:"Medium",LARGE:"Large",WALLPAPER:"Wallpaper",ALL:"All"},f={ar:"ar-SA",da:"da-DK",de:"de-DE",en:"en-US",es:"es-US",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ko:"ko-KR",nl:"nl-NL",pl:"pl-PL","pt-BR":"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-CN":"zh-CN","zh-TW":"zh-TW"},p=30},djibddbgic:function(t,e){t.exports={muted:"eMUdD",close:"_8icek",profileThumb:"btMYD",profileContainer:"_19YfI",media:"_11UqX",profileViewer:"_3SCfu",profileViewerImg:"_2p8um",container:"_1iNsf","media-viewer-animate":"_2pKlK",mediaViewerAnimate:"_2pKlK",headerContainer:"s4BtI"}},eafibdfg:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),r=h(i("gbfffciea")),s=h(i("bdgjaajijj")),o=h(i("bhhdeihhhf"));function h(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,h=Array(o),c=0;c<o;c++)h[c]=arguments[c];return i=n=l(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(h))),n.onCapture=function(){r.default.openModal(a.createElement(s.default,{onFinished:n.props.onImageTake}))},l(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),n(e,[{key:"render",value:function(){return a.createElement(o.default,{action:this.onCapture,a8n:"mi-take-photo",disabled:this.props.disabled},l10n.t(1017))}}]),e}();c.displayName="TakePhotoMenuItem",e.default=c},ebfgabegga:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),r=y(i("ceffhbhahb")),s=y(i("bcifhbgija")),o=y(i("cajbifjffe")),h=y(i("dhhfaeacef")),l=y(i("fifhbjiec")),c=i("dgfecega"),u=y(c),d=y(i("gbfffciea")),f=y(i("caffijjhc")),p=y(i("ihfccfgdf")),m=i("ejbdjaifi"),g=y(i("fffdgbfji")),v=y(i("bfdcadbbif")),_=y(i("dhbceejbjg")),b=y(i("djibddbgic"));function y(t){return t&&t.__esModule?t:{default:t}}function w(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var E=500,x=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];return i=n=w(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r))),n.state={style:{visibility:"hidden"}},n.onScroll=function(t){Math.abs(t.deltaY)>3&&n.onClose()},n.onClose=function(){if(!n.closing){n.closing=!0;var t=void 0;if(n.props.getZoomNode(function(e){t=e}),!t)return d.default.closeModalMedia();var e=n.refImage;if(e){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r=a.top-i.top,o=a.left-i.left,h=t.clientWidth/e.clientWidth;(0,s.default)(e,{translateX:[o,0],translateY:[r,0],scale:[h,1]},{duration:200,easing:[.1,.82,.25,1]}).then(function(){d.default.closeModalMedia()})}}},n.onImageLoad=function(t){var e=t.target;n.setState({size:{width:e.naturalWidth,height:e.naturalHeight}},function(){n.props.getZoomNode(function(t){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r=a.top-i.top,s={visibility:"hidden",transform:`translateX(${a.left-i.left}px) translateY(${r}px) scale(${t.clientWidth/e.clientWidth})`,transition:"transform 0s",borderRadius:void 0};n.props.animateBorderRadius&&(s.borderRadius="50%"),n.setState({style:s},function(){var t={transform:"translateX(0px) translateY(0px) scale(1)",transition:`transform ${E}ms cubic-bezier(.1,.82,.25,1)`};n.props.animateBorderRadius&&(t={transform:"translateX(0px) translateY(0px) scale(1)",borderRadius:"0%",transition:`transform ${E}ms cubic-bezier(.1,.82,.25,1),\n                                         border-radius ${E}ms cubic-bezier(.1,.82,.25,1)`}),n.setState({style:t})})})})},n.setRefImage=function(t){n.refImage=t},w(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),n(e,[{key:"shouldComponentUpdate",value:function(t,e){return!!t.profilePicThumb.imgFull||(this.onClose(),!1)}},{key:"render",value:function(){var t=this.props,e=t.contact,i=t.profilePicThumb,n=void 0;return i.imgFull&&(n=a.createElement(o.default,{src:i.imgFull,hasPrivacyChecks:!0,onLoad:this.onImageLoad,className:b.default.profileViewerImg})),a.createElement(f.default,{displayName:"PhotoViewer",escapable:!0,requestDismiss:this.onClose},a.createElement("div",{className:(0,r.default)("overlay",b.default.container),onWheel:this.onScroll,onClick:this.onClose},a.createElement("div",{className:b.default.headerContainer},a.createElement("div",{className:b.default.profileThumb},a.createElement(_.default,{image:a.createElement(h.default,{id:e.id,size:40}),theme:"plain",primary:a.createElement(l.default,{text:e.formattedUser})})),a.createElement("div",{className:b.default.close},a.createElement(v.default,{name:"x-viewer",title:g.default.t(1106),onClick:this.onClose}))),a.createElement("div",{className:b.default.profileContainer,dir:"ltr"},a.createElement("div",{className:b.default.media},a.createElement(u.default,{type:c.FIT_TYPE.SCALE_DOWN,size:this.state.size},a.createElement("div",{className:b.default.profileViewer,"data-animate-profile-viewer":!0,ref:this.setRefImage,style:this.state.style},n))))))}}]),e}();x.CONCERNS={contact:["formattedUser","id"],profilePicThumb:["imgFull"]},x.displayName="PhotoViewerModal",e.default=(0,p.default)((0,m.hoc)(x),x.CONCERNS)},ecciceaiej:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),r=o(i("effbcehec")),s=o(i("hecjahfhf"));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),n(e,[{key:"render",value:function(){return a.createElement("div",{className:s.default.overlay,key:"avatar-overlay"},this.props.icon,a.createElement("div",{"data-a8n":r.default.key("avatar-text"),className:s.default.text},this.props.text))}}]),e}();h.displayName="AvatarOverlay",e.default=h},fbfedehbb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag")),r=i("cfabbaghh"),s=i("dgfecega"),o=c(s),h=c(i("bgjhfgcbb")),l=c(i("bjghfcjch"));function c(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.initCanvas=function(){var t=i.props.editedMedia.originalImage;t.complete?i.onImageLoad():t.onload=i.onImageLoad},i.onImageLoad=function(){var t=i.props.editedMedia.editData;i.props.editedMedia.editedImage=null;var e=i.props.editedMedia.originalImage;if(t.width||t.height||(t.width=e.naturalWidth,t.height=e.naturalHeight),!t.baseItem){var n=new r.Easel.Bitmap(e);t.baseItem=n}i.drawCanvas(!0)},i.maybeInitStage=function(t){var e=void 0;return i.state.stage?e=i.state.stage:(e=new r.Easel.Stage(t)).enableMouseOver(),i.props.mediaEditController.stage=e,e},i.drawCanvas=function(t,e){if(i.refStaticCanvas&&i.refStaticCanvas.refCanvas){var n=i.refStaticCanvas.refCanvas;e&&i.props.mediaPickerStatsLogger&&i.props.mediaPickerStatsLogger.logChange(i.props.activeMediaId||-1,e);var a=i.props.editedMedia,r=a.editData,s=i.maybeInitStage(n);t&&(n.width=r.width,n.height=r.height),s.removeAllChildren(),s.addChild(r.baseItem),r.items&&s.addChild.apply(s,function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(r.items));var o=a.originalImage.naturalWidth,h=a.originalImage.naturalHeight;s.regX=o/2,s.regY=h/2,s.rotation=r.rotation,r.width&&r.height&&(s.x=r.width/2+r.scale*r.offsetX,s.y=r.height/2+r.scale*r.offsetY),s.scaleX=r.scale,s.scaleY=r.scale,s.update(),i.setState({canvasSize:{width:n.width,height:n.height},stage:s})}},i.saveCanvas=function(){i.drawCanvas(!0);var t=i.refStaticCanvas&&i.refStaticCanvas.refCanvas;t&&i.props.editedMedia.saveEditsFromCanvas(t)},i.clearStage=function(t){t&&(t.children.forEach(function(t){t.removeAllEventListeners()}),t.removeAllEventListeners(),t.removeAllChildren(),t.enableMouseOver(0),t.clear())},i.setRefStaticCanvas=function(t){i.refStaticCanvas=t},i.setRefMediaContainer=function(t){i.refMediaContainer=t},i.setRefCropOverlay=function(t){i.refCropOverlay=t},i.updateCanvasSize=function(t,e){i.setState({canvasSize:{width:t,height:e}})},i.state={canvasSize:{height:1,width:1},stage:null,mediaContainer:null},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),n(e,[{key:"componentDidMount",value:function(){this.initCanvas(),this.setState({mediaContainer:this.refMediaContainer}),this.cropOverlay=new r.Easel.Stage(this.refCropOverlay),this.cropOverlay.autoClear=!1,this.cropOverlay.enableMouseOver(),this.refMediaContainer&&(this.props.mediaEditController.mediaContainer=this.refMediaContainer),this.props.mediaEditController.cropOverlay=this.cropOverlay}},{key:"componentWillUnmount",value:function(){var t=this.props.editedMedia.originalImage;t.complete||(t.onload=void 0),this.saveCanvas(),this.clearStage(this.state.stage),this.clearStage(this.cropOverlay)}},{key:"render",value:function(){var t=a.createElement("canvas",{ref:this.setRefCropOverlay,className:l.default.cropOverlay});return a.createElement("div",{className:this.props.className,ref:this.setRefMediaContainer},a.createElement(o.default,{type:this.props.fitType||s.FIT_TYPE.SCALE_DOWN,size:this.state.canvasSize},t,a.createElement(h.default,{ref:this.setRefStaticCanvas,className:l.default.mediaViewerImg})))}}]),e}();u.displayName="MediaEditCanvas",e.default=u},fffjbcghd:function(t,e){t.exports={muted:"_20cEY",imageGallery:"_3PC6k",imageGalleryList:"t3bMe",imageGalleryItem:"eHzbo",imageGalleryItemSpacer:"oa6vo",imageGalleryItemImage:"_1NF26",imageGalleryItemOverlay:"Nv0tf",selected:"_3kd8T",imageGalleryFooter:"_3N7QG"}},gfdchbigi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i("gcfidijgh")),a=r(i("edbaidcaf"));function r(t){return t&&t.__esModule?t:{default:t}}var s=function t(e,i,a,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this),this.media=e,i?this.originalImage=i:(this.originalImage=new Image,this.originalImage.src=window.URL.createObjectURL(e)),this.previous=r,this.editData={height:0,width:0,offsetX:0,offsetY:0,rotation:0,scale:1,items:[],baseItem:null},(0,n.default)(this.editData,a)},o=function(){var t=this;this.updateEditData=function(e){t.saveEdits(),t.editData=(0,n.default)({},t.editData,e)},this.updateEditItems=function(e,i){t.saveEdits();var n=[];t.editData.items&&t.editData.items.forEach(function(t){t!==i&&n.push(t)}),n.push(e),t.editData.items=n},this.saveEdits=function(){var e=new s(t.media,t.originalImage,t.editData,t.previous);t.previous=e},this.revertEdit=function(){t.previous&&(t.editData=t.previous.editData,t.previous=t.previous.previous)},this.saveEditsFromCanvas=function(e){var i=e.toDataURL();t.editedImage||(t.editedImage=new Image),t.editedImage.src=i},this.exportEditedMedia=function(){if(t.hasEdits()&&t.editedImage){var e=t.editedImage.src;return a.default.dataURLtoFile(e)}return t.media instanceof File?t.media:new File([t.media],"",{type:t.media.type})},this.hasEdits=function(){return!!t.previous&&t.editedImage},this.cleanUp=function(){window.URL.revokeObjectURL(t.originalImage.src)}};e.default=s},hcjfjhdic:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=h(i("dcghjbcbii")),r=h(i("bcbahjefec")),s=h(i("chbcihghjd")),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("ddhijeejag"));function h(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,s=Array(r),h=0;h<r;h++)s[h]=arguments[h];return i=n=l(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),n.onImageSelected=function(t,e){n.push(o.createElement(a.default,{attributionUrl:e,onFinished:n.onFinished,img:t}))},n._pop=function(){n.pop()},n.onFinished=function(t,e){n.props.onFinished(t,e),n.end()},l(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"UNSAFE_componentWillMount",value:function(){this.push(o.createElement(s.default,{onCancel:this._pop,onImageSelected:this.onImageSelected}))}}]),e}();e.default=c},hecjahfhf:function(t,e){t.exports={muted:"JAtEj",overlay:"_1JS2G",text:"_12KQN"}},jhjhdgfci:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i("dcaifjegcg"),s=(n=r)&&n.__esModule?n:{default:n};function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=function(t){function e(){var t,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,s=Array(a),h=0;h<a;h++)s[h]=arguments[h];return i=n=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),n.stage=(0,r.prop)(),n.cropOverlay=(0,r.prop)(),n.mediaContainer=(0,r.prop)(),n.isInitialized=(0,r.derived)(n._isInitialized,["stage","cropOverlay","mediaContainer"]),o(n,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),a(e,[{key:"_isInitialized",value:function(){return!!this.stage&&!!this.cropOverlay&&!!this.mediaContainer}},{key:"clearStage",value:function(t){t&&(t.children.forEach(function(t){t.removeAllEventListeners()}),t.removeAllEventListeners(),t.removeAllChildren(),t.clear())}}]),e}();e.default=(0,r.defineModel)(h)}});